{"version":3,"sources":["lib/api.ts","lib/fontAwesome.ts","components/Navigation.tsx","lib/utils.ts","components/CategoryBadges.tsx","components/ProductCard.tsx","components/CartItems.tsx","components/Cart.tsx","components/ProductsPage.tsx","components/NotFound.tsx","components/CheckoutForm.tsx","components/Checkout.tsx","components/OrderItems.tsx","components/Confirmation.tsx","components/Loading.tsx","components/SearchHits.tsx","components/Footer.tsx","components/App.tsx","index.tsx"],"names":["apiClient","axios","create","baseURL","responseType","headers","get","slug","a","cache","response","data","length","localStorage","setItem","APP_INFO","name","JSON","stringify","getItem","parse","save","input","id","put","post","prefetch","url","client","library","add","faShoppingCart","faAngleUp","faAngleLeft","faAngleRight","faPlusCircle","faMinusCircle","faSpinner","faSearch","faTimes","faTrashAlt","faCcVisa","faCcMastercard","faCcAmex","Navigation","categories","clearSearch","setClearSearch","history","useHistory","inputRef","useRef","toggleRef","hideSearch","useCallback","noDelay","current","value","checked","setTimeout","useEffect","className","map","category","to","key","ref","type","onChange","focus","placeholder","aria-label","e","encodeURIComponent","target","push","htmlFor","icon","getCurrencyFormat","number","Intl","NumberFormat","style","currency","minimumFractionDigits","maximumFractionDigits","format","CategoryBadges","product","result","filter","productCategory","find","pc","categoryId","c","ProductCard","addToCart","alt","src","imageUrl","description","price","onClick","CartItem","quantity","updateCart","openClass","parseInt","inputMode","pattern","CartItems","cart","items","entries","Cart","toggleCart","atCheckout","cartRef","open","scrollIntoView","behavior","classOpen","Thumbnails","Header","size","Footer","articles","subTotal","undefined","blink","ProductsPage","products","useParams","currentCategory","previousSlug","usePrevious","window","scrollTo","cat","NotFound","video","hasButton","caption","autoPlay","loop","muted","playsInline","poster","goBack","CheckoutForm","onSubmit","companies","errors","company","index","companyId","createdBy","method","paymentMethod","Checkout","order","setOrder","useState","setErrors","formIsValid","formData","err","email","emailIsValid","Object","keys","match","submitOrder","createdOrder","console","log","savedOrder","getOrderRows","_order","orderRow","productId","orderId","amount","preventDefault","FormData","values","created","Date","toISOString","v","newOrder","totalPrice","orderRows","OrderItems","item","Confirmation","resetCart","error","counter","validateOrder","toLocaleString","Loading","pulse","NO_MOVIES","year","added","SearchHits","foundProducts","setFoundProducts","loading","setLoading","time","slugslug","slugify","lower","Array","from","Set","indexOf","timeEnd","setProducts","version","process","emptyCart","Map","emptyOrder","status","packageJSON","homepage","root","slice","lastIndexOf","NEWS_CATEGORY","App","setCategories","setCart","setVideo","API","blob","URL","createObjectURL","preloadVideo","unshift","setCategoriesAsync","_products","populateNewsCategory","sort","x","y","setProductsAsync","forEach","cartString","itemsString","_cart","itemsArray","m","initialCart","newCartItems","has","currentQty","set","getTotals","delete","clear","removeItem","path","exact","ReactDOM","render","basename","document","getElementById"],"mappings":"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","file":"static/js/main.636044ca.chunk.js","sourcesContent":["import axios, { AxiosInstance } from \"axios\";\r\nimport { APP_INFO } from \"../components/App\";\r\n\r\nconst apiClient: AxiosInstance = axios.create({\r\n  baseURL: \"https://medieinstitutet-wie-products.azurewebsites.net/api\",\r\n  responseType: \"json\",\r\n  headers: { \"Content-Type\": \"application/json\" }\r\n});\r\n\r\nexport const get = async <T extends {}>(\r\n  slug: string,\r\n  cache: boolean = false\r\n) => {\r\n  try {\r\n    const response = await apiClient.get<T[]>(`/${slug}`);\r\n    const data = response.data;\r\n    if (data && data.length && cache)\r\n      localStorage.setItem(`${APP_INFO.name}.${slug}`, JSON.stringify(data));\r\n    return data;\r\n  } catch (err) {\r\n    const data = localStorage.getItem(`${APP_INFO.name}.${slug}`);\r\n    if (data && data.length) return JSON.parse(data) as T[];\r\n    if (err && err.response) return err.response.data;\r\n    throw err;\r\n  }\r\n};\r\n\r\nexport const save = async <T extends {}>(\r\n  input: T,\r\n  slug: string,\r\n  id?: number\r\n) => {\r\n  try {\r\n    if (id) {\r\n      const response = await apiClient.put<T>(`/${slug}/${id}`, input);\r\n      const data = response.data;\r\n      return data;\r\n    } else {\r\n      const response = await apiClient.post<T>(`/${slug}`, input);\r\n      return response.data;\r\n    }\r\n  } catch (err) {\r\n    if (err & err.response) return err.response.data;\r\n    throw err;\r\n  }\r\n};\r\n\r\nexport const prefetch = async (url: string) => {\r\n  const client: AxiosInstance = axios.create({\r\n    responseType: \"blob\",\r\n    headers: { \"Content-Type\": \"video/x-matroska\" }\r\n  });\r\n\r\n  try {\r\n    const response = await client.get(url);\r\n    return response.data;\r\n  } catch (err) {\r\n    if (err & err.response) return err.response.data;\r\n    throw err;\r\n  }\r\n};\r\n","// icons\r\nimport { library } from \"@fortawesome/fontawesome-svg-core\";\r\nimport {\r\n  faShoppingCart,\r\n  faAngleUp,\r\n  faAngleLeft,\r\n  faAngleRight,\r\n  faPlusCircle,\r\n  faMinusCircle,\r\n  faSpinner,\r\n  faSearch,\r\n  faTimes\r\n} from \"@fortawesome/free-solid-svg-icons\";\r\nimport { faTrashAlt } from \"@fortawesome/free-regular-svg-icons\";\r\nimport {\r\n  faCcVisa,\r\n  faCcMastercard,\r\n  faCcAmex\r\n} from \"@fortawesome/free-brands-svg-icons\";\r\n\r\nlibrary.add(\r\n  faShoppingCart,\r\n  faAngleUp,\r\n  faAngleLeft,\r\n  faAngleRight,\r\n  faPlusCircle,\r\n  faMinusCircle,\r\n  faSpinner,\r\n  faSearch,\r\n  faTimes,\r\n  faTrashAlt,\r\n  faCcVisa,\r\n  faCcMastercard,\r\n  faCcAmex\r\n);\r\n","import React, {\r\n  ChangeEvent,\r\n  useRef,\r\n  useEffect,\r\n  Dispatch,\r\n  useCallback\r\n} from \"react\";\r\nimport { NavLink, useHistory } from \"react-router-dom\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\n\r\ninterface NavigationProps {\r\n  categories: ProductCategory[];\r\n  clearSearch: boolean;\r\n  setClearSearch: Dispatch<React.SetStateAction<boolean>>;\r\n}\r\n\r\nconst Navigation: React.FC<NavigationProps> = ({\r\n  categories,\r\n  clearSearch,\r\n  setClearSearch\r\n}) => {\r\n  const history = useHistory();\r\n  const inputRef = useRef<HTMLInputElement>(null);\r\n  const toggleRef = useRef<HTMLInputElement>(null);\r\n\r\n  const hideSearch = useCallback(\r\n    (noDelay?: boolean) => {\r\n      if (!noDelay) setTimeout(() => hideSearch(true), 2000);\r\n      else\r\n        !(inputRef && inputRef.current && inputRef.current.value) &&\r\n          toggleRef &&\r\n          toggleRef.current &&\r\n          (toggleRef.current.checked = false);\r\n    },\r\n    [inputRef, toggleRef]\r\n  );\r\n\r\n  useEffect(() => {\r\n    if (clearSearch && inputRef.current) {\r\n      inputRef.current.value = \"\";\r\n      hideSearch();\r\n    }\r\n    setClearSearch(false);\r\n  }, [clearSearch, hideSearch, setClearSearch]);\r\n\r\n  const handleChange = (e: ChangeEvent<HTMLInputElement>) => {\r\n    const input: string = encodeURIComponent(e.target.value);\r\n    if (!input) hideSearch();\r\n    else input.length > 1 && history.push(`/search/${input}`);\r\n  };\r\n\r\n  const focusSearch = () => {\r\n    if (toggleRef.current?.checked) inputRef.current?.focus();\r\n  };\r\n\r\n  return (\r\n    <div className=\"bg-secondary sticky-top px-2 py-1\">\r\n      <nav className=\"nav nav-pills nav-fill align-items-center\">\r\n        {categories.map(category => {\r\n          return (\r\n            <NavLink\r\n              className=\"nav-item nav-link h3 py-1 my-1\"\r\n              to={`/${category.slug}`}\r\n              key={category.id}\r\n            >\r\n              {category.name}\r\n            </NavLink>\r\n          );\r\n        })}\r\n        <div className=\"nav-item\">\r\n          <input\r\n            ref={toggleRef}\r\n            type=\"checkbox\"\r\n            id=\"search-toggle\"\r\n            onChange={focusSearch}\r\n          />\r\n          <div className=\"search mx-4 my-0 align-self-center\">\r\n            <div className=\"d-flex\">\r\n              <input\r\n                ref={inputRef}\r\n                className=\"form-control\"\r\n                type=\"search\"\r\n                placeholder=\"Search\"\r\n                aria-label=\"Search\"\r\n                onChange={handleChange}\r\n              />\r\n            </div>\r\n          </div>\r\n          <label\r\n            className=\"search-open btn btn-secondary m-0\"\r\n            htmlFor=\"search-toggle\"\r\n          >\r\n            <FontAwesomeIcon icon=\"search\" />\r\n          </label>\r\n        </div>\r\n      </nav>\r\n    </div>\r\n  );\r\n};\r\nexport default Navigation;\r\n","export const getCurrencyFormat: (number: number) => string = (number: number) =>\r\n  new Intl.NumberFormat(\"se-SV\", {\r\n    style: \"currency\",\r\n    currency: \"SEK\",\r\n    minimumFractionDigits: 0,\r\n    maximumFractionDigits: 0\r\n  }).format(number);\r\n","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\ninterface CategoryBadges {\r\n  product: Product;\r\n  categories: ProductCategory[];\r\n}\r\n\r\nconst CategoryBadges: React.FC<CategoryBadges> = ({ product, categories }) => {\r\n  let result: React.ReactNodeArray = [];\r\n  const currentCategories = categories.filter(\r\n    category =>\r\n      category.id > 0 &&\r\n      product.productCategory?.find(pc => pc.categoryId === category.id)\r\n  );\r\n\r\n  currentCategories.map(c =>\r\n    result.push(\r\n      <Link\r\n        key={c.id}\r\n        className={`badge badge-pill mr-2 text-secondary product-category-${c.id}`}\r\n        to={`/${c.slug}`}\r\n      >\r\n        {c.name}\r\n      </Link>\r\n    )\r\n  );\r\n  return <>{result}</>;\r\n};\r\n\r\nexport default CategoryBadges;\r\n","import React from \"react\";\r\nimport { getCurrencyFormat } from \"../lib/utils\";\r\n\r\n// components\r\nimport CategoryBadges from \"./CategoryBadges\";\r\n\r\ninterface ProductCardProps {\r\n  product: Product;\r\n  categories: ProductCategory[];\r\n  addToCart: AddToCart;\r\n}\r\n\r\nconst ProductCard: React.FC<ProductCardProps> = ({\r\n  product,\r\n  categories,\r\n  addToCart\r\n}) => {\r\n  return (\r\n    <div className=\"d-flex\">\r\n      <div className=\"card m-3 bg-dark shadow-sm\">\r\n        <div className=\"overlay\">\r\n          <img\r\n            className=\"card-img-top img-fluid\"\r\n            alt={product.name}\r\n            src={product.imageUrl}\r\n          />\r\n          <div className=\"card-description\">\r\n            <h4>{product.name}</h4>\r\n            <p>{product.description}</p>\r\n          </div>\r\n        </div>\r\n        <div className=\"card-footer px-4 px-md-3\">\r\n          <div className=\"d-flex mb-3\">\r\n            <CategoryBadges product={product} categories={categories} />\r\n          </div>\r\n          <div className=\"d-flex flex-md-wrap align-items-center\">\r\n            <div className=\"h5 font-weight-bold mb-0 mr-1\">\r\n              {getCurrencyFormat(product.price)}\r\n            </div>\r\n            <button\r\n              className=\"btn btn-primary ml-auto\"\r\n              onClick={() => addToCart(product, 1)}\r\n            >\r\n              Add to cart\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ProductCard;\r\n","import React, { ChangeEvent } from \"react\";\r\nimport { getCurrencyFormat } from \"../lib/utils\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\n\r\ninterface CartItemProps {\r\n  product: Product;\r\n  quantity: number;\r\n  updateCart: UpdateCart;\r\n  openClass: string;\r\n}\r\n\r\nconst CartItem: React.FC<CartItemProps> = ({\r\n  product,\r\n  quantity,\r\n  updateCart,\r\n  openClass\r\n}) => {\r\n  return (\r\n    <li className={`cart-item list-group-item d-flex px-3 pb-2 ${openClass}`}>\r\n      <div className=\"mr-3\">\r\n        <img className=\"thumbnail\" src={product.imageUrl} alt={product.name} />\r\n      </div>\r\n      <div className=\"flex-grow-1 d-flex flex-column h5\">\r\n        <div>{product.name}</div>\r\n        <div className=\"d-flex align-items-center justify-content-between mt-2\">\r\n          <div>\r\n            <div className=\"d-flex align-items-center justify-content-start\">\r\n              <div\r\n                className=\"update p-2\"\r\n                onClick={() => updateCart(product, quantity - 1)}\r\n              >\r\n                <FontAwesomeIcon icon=\"minus-circle\" />\r\n              </div>\r\n              <div className=\"font-weight-bold\">\r\n                <input\r\n                  onChange={(e: ChangeEvent<HTMLInputElement>) =>\r\n                    updateCart(product, parseInt(e.target.value))\r\n                  }\r\n                  inputMode=\"numeric\"\r\n                  pattern=\"[0-9]*\"\r\n                  type=\"text\"\r\n                  name=\"quantity\"\r\n                  value={quantity}\r\n                />\r\n              </div>\r\n              <div\r\n                className=\"update p-2\"\r\n                onClick={() => updateCart(product, quantity + 1)}\r\n              >\r\n                <FontAwesomeIcon icon=\"plus-circle\" />\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div className=\"w-25 text-right\">\r\n            {getCurrencyFormat(product.price * quantity)}\r\n          </div>\r\n          <div\r\n            className=\"update text-right p-2\"\r\n            onClick={() => updateCart(product, 0)}\r\n          >\r\n            <FontAwesomeIcon icon={[\"far\", \"trash-alt\"]} />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </li>\r\n  );\r\n};\r\n\r\ninterface CartItemsProps {\r\n  cart: Cart;\r\n  updateCart: UpdateCart;\r\n  openClass: string;\r\n}\r\n\r\nconst CartItems: React.FC<CartItemsProps> = ({\r\n  cart,\r\n  updateCart,\r\n  openClass\r\n}) => {\r\n  const result = [];\r\n  for (let [product, quantity] of cart.items.entries()) {\r\n    result.push(\r\n      <CartItem\r\n        key={product.id}\r\n        product={product}\r\n        quantity={quantity}\r\n        updateCart={updateCart}\r\n        openClass={openClass}\r\n      />\r\n    );\r\n  }\r\n  return <>{result}</>;\r\n};\r\n\r\nexport default CartItems;\r\n","import React, { useRef, useEffect } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\n//components\r\nimport CartItems from \"./CartItems\";\r\n\r\n// lib\r\nimport { getCurrencyFormat } from \"../lib/utils\";\r\n\r\n// icons\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\n\r\ninterface CartProps {\r\n  cart: Cart;\r\n  updateCart: UpdateCart;\r\n  toggleCart: () => void;\r\n  atCheckout: boolean;\r\n}\r\n\r\nconst Cart: React.FC<CartProps> = ({\r\n  cart,\r\n  updateCart,\r\n  toggleCart,\r\n  atCheckout\r\n}) => {\r\n  const cartRef = useRef<HTMLDivElement>(null);\r\n\r\n  const scrollToCart = () => {\r\n    if (cart.open && cartRef && cartRef.current)\r\n      cartRef.current.scrollIntoView({ behavior: \"smooth\" });\r\n  };\r\n\r\n  useEffect(scrollToCart, [cart.open]);\r\n\r\n  const classOpen = () => {\r\n    return cart.open || atCheckout ? \"open\" : \"\";\r\n  };\r\n\r\n  const classBlink = () => {\r\n    return cart.blink ? \"blink\" : \"\";\r\n  };\r\n\r\n  const classHeader = () => {\r\n    return (\r\n      !cart.open &&\r\n      (cart.items.size ? \" d-none d-sm-none\" : \"\") +\r\n        (cart.items.size > 2 ? \" d-md-none\" : \" d-md-block\") +\r\n        (cart.items.size > 5 ? \" d-lg-none\" : \" d-lg-block\") +\r\n        (cart.items.size > 7 ? \" d-xl-none\" : \" d-xl-block\")\r\n    );\r\n  };\r\n\r\n  const Thumbnails: React.FC = () => {\r\n    const result = [];\r\n    for (let [product, quantity] of cart.items.entries()) {\r\n      result.push(\r\n        <div\r\n          key={product.id}\r\n          className=\"py-1 py-0-sm d-flex align-items-center\"\r\n        >\r\n          <div>\r\n            <img\r\n              className=\"thumbnail\"\r\n              src={product.imageUrl}\r\n              alt={product.name}\r\n            />\r\n          </div>\r\n          <div className={`label badge badge-pill`}>{quantity}</div>\r\n        </div>\r\n      );\r\n    }\r\n    return <div className=\"d-flex flex-wrap\">{result}</div>;\r\n  };\r\n\r\n  const Header: React.FC = () => {\r\n    return (\r\n      <>\r\n        <div className=\"d-flex m-3 py-1 align-items-center flex-nowrap h5\">\r\n          <div>\r\n            <FontAwesomeIcon icon=\"shopping-cart\" />\r\n          </div>\r\n          <div className={`ml-2 font-weight-bold${classHeader()}`}>\r\n            Shopping cart\r\n          </div>\r\n        </div>\r\n        <div className=\"ml-4\">\r\n          <Thumbnails />\r\n        </div>\r\n        <div className=\"ml-auto mr-4\">\r\n          <FontAwesomeIcon icon=\"angle-up\" size=\"lg\" />\r\n        </div>\r\n      </>\r\n    );\r\n  };\r\n\r\n  const Footer: React.FC = () => {\r\n    return (\r\n      <>\r\n        {cart.articles ? (\r\n          <li\r\n            className={`cart-item cart-footer list-group-item d-flex justify-content-between align-items-center flex-wrap\r\n        ${classOpen()}`}\r\n          >\r\n            <div className=\"d-flex h5 ml-auto my-0 mr-3\">\r\n              <div className=\"font-weight-light mr-3\">Total:</div>\r\n              <div className=\"font-weight-bold\">\r\n                {getCurrencyFormat(cart.subTotal)}\r\n              </div>\r\n            </div>\r\n            <div className=\"text-right\">\r\n              {!atCheckout && (\r\n                <Link to={\"/checkout\"} className=\"btn btn-primary\">\r\n                  Check Out\r\n                  <FontAwesomeIcon\r\n                    icon=\"angle-right\"\r\n                    size=\"lg\"\r\n                    className=\"ml-2\"\r\n                  />\r\n                </Link>\r\n              )}\r\n            </div>\r\n          </li>\r\n        ) : (\r\n          undefined\r\n        )}\r\n      </>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div className=\"cart-offset\" ref={cartRef}></div>\r\n      <div className=\"cart\" id=\"cart\">\r\n        <ul className={`list-group ${cart.open ? \"\" : \"m-3\"}`}>\r\n          {!atCheckout && (\r\n            <li\r\n              onClick={toggleCart}\r\n              className={`toggle p-0 list-group-item d-flex align-items-center\r\n          ${classOpen()} ${classBlink()}`}\r\n            >\r\n              <Header />\r\n            </li>\r\n          ) // om jag lägger <li> i <Header /> funkar inte .toggle { transition:... }\r\n          }\r\n          <CartItems\r\n            cart={cart}\r\n            updateCart={updateCart}\r\n            openClass={classOpen()}\r\n          />\r\n          <Footer />\r\n        </ul>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Cart;\r\n","import React, { useEffect, useRef } from \"react\";\r\nimport { useParams, Redirect } from \"react-router-dom\";\r\n\r\n//components\r\nimport ProductCard from \"./ProductCard\";\r\nimport Cart from \"./Cart\";\r\n\r\ninterface ProductsPageProps {\r\n  categories: ProductCategory[];\r\n  products: Product[];\r\n  cart: Cart;\r\n  addToCart: AddToCart;\r\n  updateCart: UpdateCart;\r\n  toggleCart: () => void;\r\n}\r\n\r\nconst NEWS_CATEGORY = -1;\r\n\r\nconst ProductsPage: React.FC<ProductsPageProps> = ({\r\n  categories,\r\n  products,\r\n  cart,\r\n  addToCart,\r\n  updateCart,\r\n  toggleCart\r\n}) => {\r\n  const { slug } = useParams();\r\n  const currentCategory: ProductCategory | undefined = slug\r\n    ? categories.find(category => category.slug === slug)\r\n    : categories.find(category => category.id === NEWS_CATEGORY);\r\n\r\n  const usePrevious = <T extends {} | undefined>(value: T) => {\r\n    const ref = useRef<T>();\r\n    useEffect(() => {\r\n      ref.current = value;\r\n    });\r\n    return ref.current;\r\n  };\r\n  const previousSlug = usePrevious(slug);\r\n\r\n  useEffect(() => {\r\n    if (previousSlug !== slug && cart.open) toggleCart();\r\n  }, [previousSlug, slug, cart.open, toggleCart]);\r\n\r\n  useEffect(() => {\r\n    window.scrollTo(0, 0);\r\n  }, [slug]);\r\n\r\n  const getProductsFromCategory = (category: ProductCategory) => {\r\n    return products.filter(product => {\r\n      return product.productCategory.find(\r\n        cat => cat.categoryId === category.id\r\n      );\r\n    });\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {!currentCategory && <Redirect to=\"/not-found\" />}\r\n      {!slug && currentCategory && <Redirect to={`/${currentCategory.slug}`} />}\r\n      <div className=\"row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-4 row-cols-xl-5\">\r\n        {currentCategory &&\r\n          getProductsFromCategory(currentCategory).map(product => (\r\n            <ProductCard\r\n              key={product.id}\r\n              product={product}\r\n              categories={categories}\r\n              addToCart={addToCart}\r\n            />\r\n          ))}\r\n      </div>\r\n      <div className={`${cart.open ? \"\" : \"fixed-bottom\"}`}>\r\n        <div className=\"row body-bg\">\r\n          <div className=\"col col-sm-8 col-lg-6\">\r\n            <Cart\r\n              cart={cart}\r\n              updateCart={updateCart}\r\n              toggleCart={toggleCart}\r\n              atCheckout={false}\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default ProductsPage;\r\n","import React from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\n// video\r\n// import video from \"../media/404.mkv\";\r\n// import poster from \"../media/404.jpg\";\r\n\r\n// icons\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\n\r\ninterface NotFoundProps {\r\n  video: Video;\r\n  hasButton: boolean;\r\n  caption: string;\r\n}\r\n\r\nconst NotFound: React.FC<NotFoundProps> = ({ video, hasButton, caption }) => {\r\n  const history = useHistory();\r\n  return (\r\n    <div className=\"video\">\r\n      <div className=\"overlay w-100\">\r\n        <video autoPlay loop muted playsInline poster={video.poster}>\r\n          <source src={video.url} type=\"video/mp4\" />\r\n        </video>\r\n        <div className=\"description d-flex justify-content-around\">\r\n          {hasButton && (\r\n            <div className=\"align-self-center text-nowrap\">\r\n              <button className=\"btn\" onClick={history.goBack}>\r\n                <FontAwesomeIcon icon=\"angle-left\" size=\"sm\" className=\"mr-2\" />\r\n                back\r\n              </button>\r\n            </div>\r\n          )}\r\n          <div>\r\n            <h1>{caption}</h1>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default NotFound;\r\n","import React from \"react\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { IconName } from \"@fortawesome/fontawesome-common-types\";\r\n\r\ninterface CheckoutFormProps {\r\n  onSubmit: HandleSubmit;\r\n  companies: string[];\r\n  errors: OrderErrors;\r\n}\r\n\r\nconst CheckoutForm: React.FC<CheckoutFormProps> = ({\r\n  onSubmit,\r\n  companies,\r\n  errors\r\n}) => {\r\n  const payMethods = [\r\n    { icon: \"cc-visa\" as IconName, name: \"Visa\" },\r\n    { icon: \"cc-mastercard\" as IconName, name: \"MasterCard\" },\r\n    { icon: \"cc-amex\" as IconName, name: \"Amex\" }\r\n  ];\r\n\r\n  return (\r\n    <form className=\"h5 mt-4\" onSubmit={onSubmit}>\r\n      <div className=\"form-group\">\r\n        <label htmlFor=\"companyId\">company</label>\r\n        <div className=\"field\">\r\n          <select\r\n            id=\"companyId\"\r\n            name=\"companyId\"\r\n            className=\"form-control form-control-lg\"\r\n          >\r\n            {companies.map((company, index) => (\r\n              <option value={index ? index : \"\"} key={company}>\r\n                {company}\r\n              </option>\r\n            ))}\r\n          </select>\r\n        </div>\r\n        {errors.companyId && (\r\n          <div className=\"alert alert-danger mt-3\">{errors.companyId}</div>\r\n        )}\r\n      </div>\r\n      <div className=\"form-group\">\r\n        <label htmlFor=\"createdBy\">e-mail</label>\r\n        <div className=\"field\">\r\n          <input\r\n            id=\"createdBy\"\r\n            name=\"createdBy\"\r\n            type=\"text\"\r\n            className=\"form-control form-control-lg\"\r\n          />\r\n        </div>\r\n        {errors.createdBy && (\r\n          <div className=\"alert alert-danger mt-3\">{errors.createdBy}</div>\r\n        )}\r\n      </div>\r\n      <fieldset className=\"form-group pb-4\">\r\n        <div className=\"font-weight-light\">payment method</div>\r\n        {payMethods.map(method => (\r\n          <div className=\"form-check form-check-inline m-0\" key={method.icon}>\r\n            <label className=\"form-check-label\">\r\n              <span>\r\n                <input\r\n                  type=\"radio\"\r\n                  className=\"form-check-input\"\r\n                  name=\"paymentMethod\"\r\n                  id={method.icon}\r\n                  value={method.name}\r\n                />\r\n                <FontAwesomeIcon\r\n                  icon={[\"fab\", method.icon]}\r\n                  size=\"2x\"\r\n                  key={method.icon}\r\n                  className=\"pt-1\"\r\n                />\r\n              </span>\r\n            </label>\r\n          </div>\r\n        ))}\r\n      </fieldset>\r\n      {errors.paymentMethod && (\r\n        <div className=\"alert alert-danger mt-3\">{errors.paymentMethod}</div>\r\n      )}\r\n      <div className=\"mt-4 text-right\">\r\n        <button type=\"submit\" className=\"btn btn-primary\">\r\n          Place Order\r\n          <FontAwesomeIcon icon=\"angle-right\" size=\"lg\" className=\"ml-2\" />\r\n        </button>\r\n      </div>\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default CheckoutForm;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\n// api\r\nimport { save } from \"../lib/api\";\r\n\r\n// components\r\nimport Cart from \"./Cart\";\r\nimport CheckoutForm from \"./CheckoutForm\";\r\n\r\ninterface CheckoutProps {\r\n  cart: Cart;\r\n  order: Order;\r\n  companies: string[];\r\n  setOrder: React.Dispatch<React.SetStateAction<Order>>;\r\n  updateCart: UpdateCart;\r\n  toggleCart: () => void;\r\n}\r\n\r\nconst Checkout: React.FC<CheckoutProps> = ({\r\n  cart,\r\n  order,\r\n  companies,\r\n  setOrder,\r\n  updateCart,\r\n  toggleCart\r\n}) => {\r\n  const [errors, setErrors] = useState<OrderErrors>({\r\n    companyId: \"\",\r\n    createdBy: \"\",\r\n    paymentMethod: \"\"\r\n  });\r\n\r\n  useEffect(() => {\r\n    if (cart.open) toggleCart();\r\n    window.scrollTo(0, 0);\r\n  }, [cart.open, toggleCart]);\r\n\r\n  const history = useHistory();\r\n\r\n  useEffect(() => {\r\n    if (!cart.subTotal) history.push(\"/\");\r\n  }, [history, cart]);\r\n\r\n  const handleSubmit: HandleSubmit = e => {\r\n    e.preventDefault();\r\n    const formData = new FormData(e.target);\r\n\r\n    if (!formIsValid(formData)) return;\r\n\r\n    const values: { [key: string]: string } = {\r\n      created: new Date().toISOString()\r\n    };\r\n\r\n    for (let [key, value] of formData.entries()) {\r\n      const k = key as string;\r\n      const v = value as string;\r\n      values[k] = v;\r\n    }\r\n\r\n    delete order.id; // important!\r\n    const newOrder = {\r\n      ...order,\r\n      ...values,\r\n      totalPrice: cart.subTotal,\r\n      orderRows: getOrderRows(order)\r\n    };\r\n    submitOrder(newOrder);\r\n  };\r\n\r\n  const formIsValid = (formData: FormData) => {\r\n    const err: OrderErrors = {};\r\n    const email = formData.get(\"createdBy\") as string;\r\n\r\n    if (!emailIsValid(email))\r\n      err.createdBy = \"Please provide correct e-mail address!\";\r\n    if (!formData.get(\"companyId\")) err.companyId = \"Please select company!\";\r\n    if (!formData.get(\"paymentMethod\"))\r\n      err.paymentMethod = \"Please select payment method!\";\r\n    setErrors(err);\r\n    return Object.keys(err).length === 0;\r\n  };\r\n\r\n  const emailIsValid = (input: string) => {\r\n    const format = /^\\w+([.-]?\\w+)*@\\w+([.-]?\\w+)*(\\.\\w{2,3})+$/;\r\n    return input.match(format);\r\n  };\r\n\r\n  const submitOrder = async (createdOrder: Order) => {\r\n    console.log(\"createdOrder:\", JSON.stringify(createdOrder));\r\n    const savedOrder: Order = await save<Order>(createdOrder, \"orders\");\r\n    console.log(\"savedOrder:\", JSON.stringify(savedOrder));\r\n    setOrder({ ...savedOrder });\r\n    history.push(\"/confirmation\");\r\n  };\r\n\r\n  const getOrderRows = (_order: Order) => {\r\n    const result = [];\r\n    for (let [product, quantity] of cart.items.entries()) {\r\n      const orderRow: OrderRow = {\r\n        productId: product.id,\r\n        orderId: _order?.id,\r\n        amount: quantity\r\n      };\r\n      result.push(orderRow);\r\n    }\r\n    return result;\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div className=\"row row-cols-1 row-cols-md-2\">\r\n        <div className=\"col mt-2 p-0\">\r\n          <Cart\r\n            cart={cart}\r\n            updateCart={updateCart}\r\n            toggleCart={toggleCart}\r\n            atCheckout={true}\r\n          />\r\n        </div>\r\n        <div className=\"col\">\r\n          <CheckoutForm\r\n            onSubmit={handleSubmit}\r\n            errors={errors}\r\n            companies={companies}\r\n          />\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Checkout;\r\n","import React from \"react\";\r\nimport { getCurrencyFormat } from \"../lib/utils\";\r\n\r\ninterface OrderItemsProps {\r\n  order: Order;\r\n  products: Product[];\r\n}\r\n\r\nconst OrderItems: React.FC<OrderItemsProps> = ({ order, products }) => {\r\n  return (\r\n    <>\r\n      <li className=\"cart-item list-group-item d-flex justify-content-between font-weight-light open\">\r\n        <div className=\"w-50\">product</div>\r\n        <div className=\"w-25 text-center\">quantity</div>\r\n        <div className=\"w-25 text-right\">price</div>\r\n      </li>\r\n      {order.orderRows?.map(item => {\r\n        const product = products.find(product => product.id === item.productId);\r\n        return (\r\n          <li\r\n            key={product?.id}\r\n            className=\"cart-item list-group-item d-flex align-items-center justify-content-between open m-0\"\r\n          >\r\n            <div className=\"w-50 d-flex align-items-center\">\r\n              <div className=\"mr-3\">\r\n                <img\r\n                  className=\"thumbnail\"\r\n                  src={product?.imageUrl}\r\n                  alt={product?.name}\r\n                />\r\n              </div>\r\n              <div>{product?.name}</div>\r\n            </div>\r\n            <div className=\"w-25 text-center\">{item.amount}</div>\r\n            <div className=\"w-25 text-right\">\r\n              {getCurrencyFormat(product ? product.price * item.amount : 0)}\r\n            </div>\r\n          </li>\r\n        );\r\n      })}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default OrderItems;\r\n","import React, { useEffect } from \"react\";\r\nimport { getCurrencyFormat } from \"../lib/utils\";\r\n\r\n// components\r\nimport OrderItems from \"./OrderItems\";\r\n\r\ninterface ConfirmationProps {\r\n  cart: Cart;\r\n  resetCart: () => void;\r\n  order: Order;\r\n  products: Product[];\r\n  companies: string[];\r\n}\r\n\r\nconst Confirmation: React.FC<ConfirmationProps> = ({\r\n  cart,\r\n  resetCart,\r\n  order,\r\n  products,\r\n  companies\r\n}) => {\r\n  console.log(\"order:\", order);\r\n\r\n  useEffect(() => {\r\n    window.scrollTo(0, 0);\r\n  }, []);\r\n\r\n  const validateOrder = () => {\r\n    let error = \"\";\r\n    if (order.orderRows) {\r\n      if (order.orderRows?.length !== cart.items.size)\r\n        error = \"Order contains wrong number of items.\";\r\n      let counter = 0;\r\n      for (let [product, quantity] of cart.items.entries()) {\r\n        const orderRow = order.orderRows[counter];\r\n        if (\r\n          !(product.id === orderRow.productId && quantity === orderRow.amount)\r\n        )\r\n          error = `Order contains wrong quantity of \"${product.name}\": ${orderRow.amount} should be ${quantity}!`;\r\n        counter++;\r\n      }\r\n    } else error = \"Order is empty!\";\r\n\r\n    if (!error) {\r\n      resetCart();\r\n      return \"\";\r\n    } else return <div className=\"alert alert-danger mt-4 mb-0\">{error}</div>;\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div className=\"row\">\r\n        <h1 className=\"m-4 text-secondary\">Order confirmation</h1>\r\n      </div>\r\n      <div className=\"row\">\r\n        <div className=\"col col-12 col-lg-6 mb-4\">\r\n          <div className=\"cart open\">\r\n            <ul className=\"list-group open\">\r\n              <OrderItems order={order} products={products} />\r\n              <li className=\"cart-item cart-footer list-group-item d-flex justify-content-end open\">\r\n                <div className=\"font-weight-bold d-flex m-0\">\r\n                  <div className=\"font-weight-light mr-3\">Total:</div>\r\n                  <div>{getCurrencyFormat(order.totalPrice)}</div>\r\n                </div>\r\n              </li>\r\n            </ul>\r\n          </div>\r\n          {validateOrder()}\r\n        </div>\r\n        <div className=\"col\">\r\n          <div className=\"cart open\">\r\n            <ul className=\"list-group open m-0\">\r\n              <li className=\"cart-item list-group-item d-flex align-items-center justify-content-between open\">\r\n                <div className=\"font-weight-light\">order #</div>\r\n                <div>{order.id}</div>\r\n              </li>\r\n              <li className=\"cart-item list-group-item d-flex align-items-center justify-content-between open\">\r\n                <div className=\"font-weight-light\">customer</div>\r\n                <div>{companies[order.companyId]}</div>\r\n              </li>\r\n              <li className=\"cart-item list-group-item d-flex align-items-center justify-content-between open\">\r\n                <div className=\"font-weight-light\">order created</div>\r\n                <div className=\"text-nowrap\">\r\n                  {new Date(order.created).toLocaleString(\"en-gb\")}\r\n                </div>\r\n              </li>\r\n              <li className=\"cart-item list-group-item d-flex align-items-center justify-content-between open\">\r\n                <div className=\"font-weight-light\">e-mail</div>\r\n                <div>{order.createdBy}</div>\r\n              </li>\r\n              <li className=\"cart-item list-group-item d-flex align-items-center justify-content-between open\">\r\n                <div className=\"font-weight-light\">payment method</div>\r\n                <div>{order.paymentMethod}</div>\r\n              </li>\r\n            </ul>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Confirmation;\r\n","import React from \"react\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\n\r\nconst Loading = () => {\r\n  return (\r\n    <div className=\"loading text-primary\">\r\n      <FontAwesomeIcon icon=\"spinner\" size=\"10x\" pulse />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Loading;\r\n","import React, { useEffect, useState, Dispatch } from \"react\";\r\nimport { useParams, Redirect } from \"react-router-dom\";\r\n\r\n// API\r\n// import { get } from \"../lib/api\";\r\n\r\n// components\r\nimport ProductCard from \"./ProductCard\";\r\nimport Cart from \"./Cart\";\r\nimport NotFound from \"./NotFound\";\r\nimport Loading from \"./Loading\";\r\nimport slugify from \"slugify\";\r\n\r\nconst NO_MOVIES: Product[] = [\r\n  {\r\n    id: -1,\r\n    name: \"No products\",\r\n    description: \"\",\r\n    price: 0,\r\n    imageUrl: \"\",\r\n    year: 0,\r\n    added: new Date(),\r\n    productCategory: []\r\n  }\r\n];\r\n\r\ninterface SearchHitsProps {\r\n  categories: ProductCategory[];\r\n  products: Product[];\r\n  cart: Cart;\r\n  addToCart: AddToCart;\r\n  updateCart: UpdateCart;\r\n  toggleCart: () => void;\r\n  setClearSearch: Dispatch<React.SetStateAction<boolean>>;\r\n  video: Video;\r\n}\r\n\r\nconst SearchHits: React.FC<SearchHitsProps> = ({\r\n  categories,\r\n  products,\r\n  cart,\r\n  addToCart,\r\n  updateCart,\r\n  toggleCart,\r\n  setClearSearch,\r\n  video\r\n}) => {\r\n  const { slug } = useParams();\r\n  const [foundProducts, setFoundProducts] = useState<Product[]>([]);\r\n  const [loading, setLoading] = useState<boolean>(true);\r\n\r\n  useEffect(() => {\r\n    setLoading(!foundProducts.length);\r\n  }, [loading, foundProducts]);\r\n\r\n  useEffect(() => {\r\n    window.scrollTo(0, 0);\r\n    if (slug) {\r\n      // const setProductsAsync = async () => {\r\n      //   console.time(\"hits\");\r\n      //   const hits: Product[] = await get<Product>(\r\n      //     `search/?searchText=${slug}`\r\n      //   );\r\n      //   const result: Product[] =\r\n      //     hits && hits.length\r\n      //       ? products.filter(product =>\r\n      //           hits.map(hit => hit.id).includes(product.id)\r\n      //         )\r\n      //       : NO_MOVIES;\r\n      //   console.timeEnd(\"hits\");\r\n\r\n      //   setFoundProducts(result);\r\n      // };\r\n\r\n      const setProducts = () => {\r\n        console.time(\"hits\");\r\n        const slugslug = slugify(slug, { lower: true });\r\n        const result: Product[] = Array.from(\r\n          new Set(\r\n            products.filter(\r\n              product =>\r\n                slugify(product.name, { lower: true }).indexOf(slugslug) >= 0\r\n            )\r\n          )\r\n        );\r\n        console.timeEnd(\"hits\");\r\n\r\n        setFoundProducts(result?.length ? result : NO_MOVIES);\r\n      };\r\n\r\n      setProducts();\r\n    }\r\n  }, [slug, products]);\r\n\r\n  useEffect(() => {\r\n    return () => {\r\n      setClearSearch(true);\r\n    };\r\n  }, [setClearSearch]);\r\n\r\n  return (\r\n    <>\r\n      {!slug && <Redirect to=\"/\" />}\r\n      {((!foundProducts || !foundProducts.length) && <Loading />) ||\r\n        (foundProducts === NO_MOVIES && (\r\n          <NotFound video={video} hasButton={false} caption=\"Nope\" />\r\n        )) || (\r\n          <>\r\n            <div className=\"row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-4 row-cols-xl-5\">\r\n              {foundProducts.map(product => (\r\n                <ProductCard\r\n                  key={product.id}\r\n                  product={product}\r\n                  categories={categories}\r\n                  addToCart={addToCart}\r\n                />\r\n              ))}\r\n            </div>\r\n          </>\r\n        )}\r\n      <div className={`${cart.open ? \"\" : \"fixed-bottom\"}`}>\r\n        <div className=\"row\">\r\n          <div className=\"col col-sm-8 col-lg-6\">\r\n            <Cart\r\n              cart={cart}\r\n              updateCart={updateCart}\r\n              toggleCart={toggleCart}\r\n              atCheckout={false}\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default SearchHits;\r\n","import React from \"react\";\r\nimport { APP_INFO } from \"./App\";\r\n\r\nconst Footer = () => {\r\n  return (\r\n    <footer>\r\n      <div>&copy; 2020 Christofer Laurin</div>\r\n      <div>\r\n        {`${APP_INFO.name} ${APP_INFO.version} ${process.env.NODE_ENV}`}\r\n      </div>\r\n    </footer>\r\n  );\r\n};\r\n\r\nexport default Footer;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { Route, Switch, Redirect } from \"react-router-dom\";\r\nimport slugify from \"slugify\";\r\nimport packageJSON from \"../../package.json\";\r\n\r\n// API\r\nimport * as API from \"../lib/api\";\r\n\r\n// css\r\nimport \"../scss/App.scss\";\r\n\r\n// icons\r\nimport \"../lib/fontAwesome\";\r\n\r\n// components\r\nimport Navigation from \"./Navigation\";\r\nimport ProductsPage from \"./ProductsPage\";\r\nimport NotFound from \"./NotFound\";\r\nimport Checkout from \"./Checkout\";\r\nimport Confirmation from \"./Confirmation\";\r\nimport Loading from \"./Loading\";\r\nimport SearchHits from \"./SearchHits\";\r\nimport Footer from \"./Footer\";\r\n\r\nconst emptyCart: Cart = {\r\n  items: new Map(),\r\n  articles: 0,\r\n  subTotal: 0,\r\n  blink: false,\r\n  open: false\r\n};\r\n\r\nconst emptyOrder: Order = {\r\n  companyId: 0,\r\n  created: \"\",\r\n  createdBy: \"\",\r\n  paymentMethod: \"\",\r\n  totalPrice: 0,\r\n  status: 0\r\n};\r\n\r\nexport const APP_INFO = {\r\n  name: packageJSON.name,\r\n  version: packageJSON.version,\r\n  homepage: packageJSON.homepage,\r\n  root: packageJSON.homepage.slice(packageJSON.homepage.lastIndexOf(\"/\"))\r\n};\r\n\r\nconst MIN_QTY = 1;\r\nconst MAX_QTY = 99;\r\nconst NEWS_CATEGORY: ProductCategory = { id: -1, name: \"Newly added\" };\r\nconst NUMBER_OF_ITEMS_IN_NEWS = 4;\r\n\r\nconst companies = [\"\", \"Telia\", \"Volvo\", \"Skanska\", \"ABB\"];\r\n\r\nconst App = () => {\r\n  const [loading, setLoading] = useState<boolean>(true);\r\n  const [categories, setCategories] = useState<ProductCategory[]>([]);\r\n  const [products, setProducts] = useState<Product[]>([]);\r\n\r\n  const [cart, setCart] = useState<Cart>(emptyCart);\r\n  const [order, setOrder] = useState<Order>(emptyOrder);\r\n\r\n  const [clearSearch, setClearSearch] = useState<boolean>(false);\r\n  const [video, setVideo] = useState<Video>({ url: \"\", poster: \"\" });\r\n\r\n  useEffect(() => {\r\n    const preloadVideo = async () => {\r\n      const blob = await API.prefetch(`${APP_INFO.root}/media/404.mkv`);\r\n      const url = window.URL.createObjectURL(blob);\r\n      const poster = `${APP_INFO.root}/media/404.jpg`;\r\n      setVideo({ url, poster });\r\n    };\r\n    preloadVideo();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    setLoading(!(categories.length && products.length));\r\n  }, [loading, categories, products]);\r\n\r\n  useEffect(() => {\r\n    const setCategoriesAsync = async () => {\r\n      const c: ProductCategory[] = await API.get<ProductCategory>(\r\n        \"categories\",\r\n        true\r\n      );\r\n      c.unshift(NEWS_CATEGORY);\r\n      c.map(\r\n        category => (category.slug = slugify(category.name, { lower: true }))\r\n      );\r\n      setCategories(c);\r\n    };\r\n    setCategoriesAsync();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const setProductsAsync = async () => {\r\n      const _products: Product[] = await API.get<Product>(\"products\", true);\r\n      populateNewsCategory(_products);\r\n      _products.sort((x, y) => (x.name > y.name ? 1 : -1));\r\n      setProducts(_products);\r\n    };\r\n    setProductsAsync();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (cart.blink) {\r\n      setTimeout(() => setCart({ ...cart, blink: false }), 500);\r\n    }\r\n    if (cart.items.size) {\r\n      localStorage.setItem(`${APP_INFO.name}.cart`, JSON.stringify(cart));\r\n      const items: number[][] = [];\r\n      cart.items.forEach((quantity, product) =>\r\n        items.push([product.id, quantity])\r\n      );\r\n      localStorage.setItem(`${APP_INFO.name}.items`, JSON.stringify(items));\r\n    }\r\n  }, [cart]);\r\n\r\n  useEffect(() => {\r\n    const initialCart: () => Cart = () => {\r\n      const cartString = localStorage.getItem(`${APP_INFO.name}.cart`);\r\n      const itemsString = localStorage.getItem(`${APP_INFO.name}.items`);\r\n      if (\r\n        cartString &&\r\n        cartString.length &&\r\n        itemsString &&\r\n        itemsString.length\r\n      ) {\r\n        const _cart: Cart = JSON.parse(cartString);\r\n        const itemsArray = JSON.parse(itemsString).map((values: number[]) => {\r\n          const [productId, quantity] = values;\r\n          const product = products.find(m => m.id === productId);\r\n          return [product, quantity];\r\n        });\r\n        _cart.items = new Map<Product, number>(itemsArray);\r\n        return _cart;\r\n      }\r\n      return emptyCart;\r\n    };\r\n    if (products && products.length) setCart(initialCart());\r\n  }, [products]);\r\n\r\n  const populateNewsCategory = (_products: Product[]) => {\r\n    _products.sort((x, y) => (x.added < y.added ? 1 : -1));\r\n    _products\r\n      .slice(0, NUMBER_OF_ITEMS_IN_NEWS)\r\n      .map(product =>\r\n        product.productCategory.push({ categoryId: NEWS_CATEGORY.id })\r\n      );\r\n  };\r\n\r\n  const addToCart: AddToCart = (product, quantity) => {\r\n    const newCartItems = new Map(cart.items);\r\n    if (newCartItems.has(product)) {\r\n      const currentQty = newCartItems.get(product);\r\n      if (currentQty) newCartItems.set(product, currentQty + quantity);\r\n    } else newCartItems.set(product, quantity);\r\n    const [subTotal, articles] = getTotals(newCartItems);\r\n    setCart({\r\n      items: newCartItems,\r\n      articles,\r\n      subTotal,\r\n      blink: true,\r\n      open: false\r\n    });\r\n  };\r\n\r\n  const updateCart: UpdateCart = (product, quantity) => {\r\n    const newCartItems = new Map(cart.items);\r\n    if (product && quantity === 0) {\r\n      newCartItems.delete(product);\r\n    } else if (quantity >= MIN_QTY && quantity <= MAX_QTY) {\r\n      newCartItems.set(product, quantity);\r\n    }\r\n    const [subTotal, articles] = getTotals(newCartItems);\r\n    setCart({\r\n      items: newCartItems,\r\n      articles,\r\n      subTotal,\r\n      blink: !cart.open,\r\n      open: cart.open\r\n    });\r\n    console.log(\"newCartItems:\", newCartItems);\r\n    if (!newCartItems.size) resetCart();\r\n  };\r\n\r\n  const resetCart = () => {\r\n    cart.items.clear();\r\n    cart.articles = 0;\r\n    cart.subTotal = 0;\r\n    cart.open = false;\r\n    localStorage.removeItem(`${APP_INFO.name}.cart`);\r\n    localStorage.removeItem(`${APP_INFO.name}.items`);\r\n  };\r\n\r\n  const getTotals = (items: Map<Product, number>) => {\r\n    let subTotal = 0;\r\n    let articles = 0;\r\n    for (let [product, quantity] of items.entries()) {\r\n      const price = product.price * quantity;\r\n      subTotal += price;\r\n      articles += quantity;\r\n    }\r\n    return [subTotal, articles];\r\n  };\r\n\r\n  const toggleCart = () => {\r\n    if (cart.articles) setCart({ ...cart, open: !cart.open });\r\n  };\r\n\r\n  return loading ? (\r\n    <Loading />\r\n  ) : (\r\n    <div id=\"content\">\r\n      <Navigation\r\n        categories={categories}\r\n        clearSearch={clearSearch}\r\n        setClearSearch={setClearSearch}\r\n      />\r\n      <main className=\"container-fluid text-light px-3\">\r\n        <Switch>\r\n          <Route path=\"/checkout\">\r\n            <Checkout\r\n              cart={cart}\r\n              order={order}\r\n              companies={companies}\r\n              setOrder={setOrder}\r\n              updateCart={updateCart}\r\n              toggleCart={toggleCart}\r\n            />\r\n          </Route>\r\n          <Route path=\"/confirmation\">\r\n            <Confirmation\r\n              cart={cart}\r\n              resetCart={resetCart}\r\n              order={order}\r\n              companies={companies}\r\n              products={products}\r\n            />\r\n          </Route>\r\n          <Route path=\"/not-found\">\r\n            <NotFound video={video} hasButton={true} caption=\"404\" />\r\n          </Route>\r\n          <Route path=\"/search/:slug\">\r\n            <SearchHits\r\n              categories={categories}\r\n              products={products}\r\n              cart={cart}\r\n              addToCart={addToCart}\r\n              updateCart={updateCart}\r\n              toggleCart={toggleCart}\r\n              setClearSearch={setClearSearch}\r\n              video={video}\r\n            />\r\n          </Route>\r\n          <Route path=\"/:slug\">\r\n            <ProductsPage\r\n              categories={categories}\r\n              products={products}\r\n              cart={cart}\r\n              addToCart={addToCart}\r\n              updateCart={updateCart}\r\n              toggleCart={toggleCart}\r\n            />\r\n          </Route>\r\n          <Redirect from=\"/\" exact to=\"/newly-added\" />\r\n          <Route>\r\n            <Redirect to=\"/not-found\" />\r\n          </Route>\r\n        </Switch>\r\n      </main>\r\n      <Footer />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default App;\r\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { BrowserRouter as Router } from \"react-router-dom\";\n\n// components\nimport App from \"./components/App\";\n\nReactDOM.render(\n  <Router basename={process.env.PUBLIC_URL}>\n    <App />\n  </Router>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}