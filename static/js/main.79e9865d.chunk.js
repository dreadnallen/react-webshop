(this["webpackJsonpreact-webshop"]=this["webpackJsonpreact-webshop"]||[]).push([[0],{27:function(e){e.exports=JSON.parse('{"name":"react-webshop","version":"0.2.0","homepage":"https://dreadnallen.github.io/react-webshop","private":true,"dependencies":{"@fortawesome/fontawesome-svg-core":"^1.2.28","@fortawesome/free-brands-svg-icons":"^5.13.0","@fortawesome/free-regular-svg-icons":"^5.13.0","@fortawesome/free-solid-svg-icons":"^5.13.0","@fortawesome/react-fontawesome":"^0.1.9","@testing-library/jest-dom":"^4.2.4","@testing-library/react":"^9.5.0","@testing-library/user-event":"^7.2.1","@types/jest":"^24.9.1","@types/node":"^12.12.30","@types/react":"^16.9.25","@types/react-dom":"^16.9.5","@types/react-router-dom":"^5.1.3","axios":"^0.19.2","bootstrap":"^4.4.1","gh-pages":"^2.2.0","node-sass":"^4.13.1","react":"^16.13.1","react-bootstrap":"^1.0.0","react-dom":"^16.13.1","react-router-dom":"^5.1.2","react-scripts":"3.4.1","slugify":"^1.4.0","typescript":"^3.7.5"},"scripts":{"start":"react-scripts start","build":"react-scripts build","test":"react-scripts test","eject":"react-scripts eject","predeploy":"npm run build","deploy":"gh-pages -d build"},"eslintConfig":{"extends":"react-app"},"browserslist":{"production":[">0.2%","not dead","not op_mini all"],"development":["last 1 chrome version","last 1 firefox version","last 1 safari version"]}}')},61:function(e,t,a){e.exports=a(91)},66:function(e,t,a){},91:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(21),o=a.n(c),s=a(13),l=a(6),i=a(23),u=(a(66),a(59)),m=a(30),d=a(19),p=a(55),f=a(37);m.b.add(d.h,d.c,d.a,d.b,d.f,d.e,d.i,d.g,d.j,p.a,f.c,f.b,f.a,d.d);var E={id:-1,name:"Newly added"},v=Object(n.createContext)({categories:[],products:[],news:{NEWS_CATEGORY:E,NUMBER_OF_ITEMS_IN_NEWS:4}}),b=a(24),g=a.n(b),h=[{id:0,name:""},{id:9001,name:"Telia"},{id:9002,name:"Volvo"},{id:9003,name:"Skanska"},{id:9004,name:"ABB"}];h.map((function(e){return e.slug=g()(e.name,{lower:!0})}));var y,O={items:new Map,articles:0,subTotal:0,blink:!1,open:!1,modal:{caption:"Delete item?",labelConfirm:"Delete",labelCancel:"Cancel",show:!1}},j={companyId:0,created:"",createdBy:"",paymentMethod:"",totalPrice:0,status:0},N="Please provide an accurate e-mail address!",x="Please select company!",w="Please select payment method!",C=Object(n.createContext)({companies:h,cart:O,dispatch:function(){},order:j,setOrder:function(){}}),S=a(7),k=a.n(S),I=a(10),D=a(40),T=a.n(D),F=a(27),A={name:F.name,version:F.version,homepage:F.homepage,root:F.homepage.slice(F.homepage.lastIndexOf("/"))},L=function(e){return new Intl.NumberFormat("se-SV",{style:"currency",currency:"SEK",minimumFractionDigits:0,maximumFractionDigits:0}).format(e)},M=function(e){return String(e).replace(/(.)(?=(\d{5})+$)/g,"$1-")},R=T.a.create({baseURL:"https://dreadnallen-react-webshop.firebaseapp.com/api/v1",responseType:"json",headers:{"Content-Type":"application/json"}}),P=function(){var e=Object(I.a)(k.a.mark((function e(t){var a,n,r,c,o=arguments;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>1&&void 0!==o[1]&&o[1],e.prev=1,e.next=4,R.get("/".concat(t));case 4:return n=e.sent,(r=n.data)&&r.length&&a&&localStorage.setItem("".concat(A.name,".").concat(t),JSON.stringify(r)),e.abrupt("return",r);case 10:if(e.prev=10,e.t0=e.catch(1),!(c=localStorage.getItem("".concat(A.name,".").concat(t)))||!c.length){e.next=15;break}return e.abrupt("return",JSON.parse(c));case 15:if(!e.t0||!e.t0.response){e.next=17;break}return e.abrupt("return",e.t0.response.data);case 17:throw e.t0;case 18:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}(),G=function(){var e=Object(I.a)(k.a.mark((function e(t,a,n){var r,c;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!n){e.next=8;break}return e.next=4,R.put("/".concat(a,"/").concat(n),t);case 4:return r=e.sent,e.abrupt("return",{status:r.status,data:r.data});case 8:return e.next=10,R.post("/".concat(a),t);case 10:return c=e.sent,e.abrupt("return",{status:c.status,data:c.data});case 12:e.next=19;break;case 14:if(e.prev=14,e.t0=e.catch(0),!e.t0||!e.t0.response){e.next=18;break}return e.abrupt("return",e.t0.response);case 18:throw e.t0;case 19:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,a,n){return e.apply(this,arguments)}}(),q=function(){var e=Object(I.a)(k.a.mark((function e(t,a){var n;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,R.delete("/".concat(t,"/").concat(a),{data:{id:a}});case 3:return n=e.sent,e.abrupt("return",n);case 7:if(e.prev=7,e.t0=e.catch(0),!e.t0||!e.t0.response){e.next=11;break}return e.abrupt("return",e.t0.response);case 11:throw e.t0;case 12:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,a){return e.apply(this,arguments)}}(),z=function(){var e=Object(I.a)(k.a.mark((function e(t){var a,n;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=T.a.create({responseType:"blob",headers:{"Content-Type":"video/x-matroska"}}),e.prev=1,e.next=4,a.get(t);case 4:return n=e.sent,e.abrupt("return",n.data);case 8:if(e.prev=8,e.t0=e.catch(1),!e.t0||!e.t0.response){e.next=12;break}return e.abrupt("return",e.t0.response.data);case 12:throw e.t0;case 13:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),B=a(60),V=a(20),U=a(9);!function(e){e[e.ADD=0]="ADD",e[e.UPDATE=1]="UPDATE",e[e.DELETE=2]="DELETE",e[e.RESET=3]="RESET",e[e.TOGGLE=4]="TOGGLE",e[e.HIDE_MODAL=5]="HIDE_MODAL"}(y||(y={}));var _,J=function(e){var t=Object(n.useState)(O),a=Object(l.a)(t,2),r=a[0],c=a[1];Object(n.useEffect)((function(){if(r.blink&&setTimeout((function(){return c(Object(U.a)({},r,{blink:!1}))}),500),r.items.size){localStorage.setItem("".concat(A.name,".cart"),JSON.stringify(r));var e=[];r.items.forEach((function(t,a){return!!a&&e.push([a.id,t])})),localStorage.setItem("".concat(A.name,".items"),JSON.stringify(e))}}),[r]),Object(n.useEffect)((function(){e&&e.length&&c(function(){var t=O,a=localStorage.getItem("".concat(A.name,".cart")),n=localStorage.getItem("".concat(A.name,".items"));if(a&&a.length&&n&&n.length){var r=Object(U.a)({},t,{},JSON.parse(a)),c=JSON.parse(n).map((function(t){var a=Object(l.a)(t,2),n=a[0],r=a[1],c=e.find((function(e){return e.id===n}));return c?[c,r]:void 0}));r.items=new Map(c.filter((function(e){return!!e}))),r.items.size&&(t=r)}return t}())}),[e]);var o=function(){c(O),localStorage.removeItem("".concat(A.name,".cart")),localStorage.removeItem("".concat(A.name,".items"))};return[r,function(e,t){var a=Object(U.a)({},r),n=null===t||void 0===t?void 0:t.product,s=(null===t||void 0===t?void 0:t.quantity)?null===t||void 0===t?void 0:t.quantity:0,i=n?a.items.get(n):0;switch(e){case y.RESET:o();break;case y.TOGGLE:r.articles&&c(Object(U.a)({},r,{open:!r.open}));break;case y.HIDE_MODAL:a.modal.show=!1,c(Object(U.a)({},a));break;case y.ADD:s=i?i+s:s;default:var u=e===y.ADD?[!0,!1]:[!r.open,r.open],m=Object(l.a)(u,2);a.blink=m[0],a.open=m[1];var d,p=new Map(r.items);if(e===y.DELETE)a.modal.show=!1,(null===(d=r.modal.item)||void 0===d?void 0:d.product)&&p.delete(r.modal.item.product);else n&&(0===s?(a.modal.item={product:n,quantity:i||0},a.modal.show=!0):s>=1&&s<=99&&p.set(n,s));if(p.size){var f=[p].concat(Object(B.a)(function(e){var t,a=0,n=0,r=Object(V.a)(e.entries());try{for(r.s();!(t=r.n()).done;){var c=Object(l.a)(t.value,2),o=c[0],s=c[1];a+=o.price*s,n+=s}}catch(i){r.e(i)}finally{r.f()}return[a,n]}(p)));a.items=f[0],a.subTotal=f[1],a.articles=f[2],c(Object(U.a)({},a))}else o()}}]},Y=a(8),H=function(e){var t=e.clearSearch,a=e.setClearSearch,c=Object(n.useContext)(v).categories,o=Object(i.g)(),l=Object(n.useRef)(null),u=Object(n.useRef)(null),m=Object(n.useCallback)((function(e){e?!(l&&l.current&&l.current.value)&&u&&u.current&&(u.current.checked=!1):setTimeout((function(){return m(!0)}),2e3)}),[l,u]);Object(n.useEffect)((function(){t&&l.current&&(l.current.value="",m()),a(!1)}),[t,m,a]);return r.a.createElement("div",{className:"bg-secondary sticky-top px-2 py-1"},r.a.createElement("nav",{className:"nav nav-pills nav-fill align-items-center"},c.map((function(e){return r.a.createElement(s.c,{className:"nav-item nav-link h2 pt-2 pb-1 my-1",to:"/".concat(e.slug),key:e.id},e.name)})),r.a.createElement("div",{className:"nav-item"},r.a.createElement("input",{ref:u,type:"checkbox",id:"search-toggle",onChange:function(){var e,t;(null===(e=u.current)||void 0===e?void 0:e.checked)&&(null===(t=l.current)||void 0===t||t.focus())}}),r.a.createElement("div",{className:"search mx-4 my-0 align-self-center"},r.a.createElement("div",{className:"d-flex"},r.a.createElement("input",{ref:l,className:"form-control",type:"search",placeholder:"Search","aria-label":"Search",onChange:function(e){var t=encodeURIComponent(e.target.value);t?t.length>1&&o.push("/search/".concat(t)):m()}}))),r.a.createElement("label",{className:"search-open btn btn-secondary m-0",htmlFor:"search-toggle"},r.a.createElement(Y.a,{icon:"search"})))))},W=a(14),$=a(12),K=function(e){var t=e.product,a=Object(n.useContext)(v).categories,c=[];return a.filter((function(e){var a;return e.id>0&&(null===(a=t.productCategory)||void 0===a?void 0:a.find((function(t){return t.categoryId===e.id})))})).map((function(e){return c.push(r.a.createElement(s.b,{key:e.id,className:"badge badge-pill mr-2 text-secondary product-category-".concat(e.id),to:"/".concat(e.slug)},e.name))})),r.a.createElement(r.a.Fragment,null,c)},Q=function(e){var t=e.product,a=Object(n.useContext)(C).dispatch;return r.a.createElement("div",{className:"d-flex"},r.a.createElement("div",{className:"card mx-1 mx-sm-3 my-3 bg-dark shadow-sm"},r.a.createElement("div",{className:"overlay"},r.a.createElement("img",{className:"card-img-top img-fluid",alt:t.name,src:t.imageUrl}),r.a.createElement("div",{className:"card-description"},r.a.createElement("div",{className:"d-flex"},r.a.createElement("div",null,r.a.createElement("img",{className:"thumbnail d-block d-sm-none",alt:t.name,src:t.imageUrl})),r.a.createElement("div",null,r.a.createElement("h4",{className:"font-weight-bold"},t.name),r.a.createElement("p",null,t.description))))),r.a.createElement("div",{className:"card-footer px-3 px-md-2"},r.a.createElement("div",{className:"d-flex mb-3"},r.a.createElement(K,{product:t})),r.a.createElement("div",{className:"d-flex flex-md-wrap align-items-center justify-content-between"},r.a.createElement("div",{className:"h5 font-weight-bold mb-0 mx-1"},L(t.price)),r.a.createElement("button",{className:"btn btn-primary",onClick:function(){return a(y.ADD,{product:t,quantity:1})}},"Add to cart")))))},X=function(e){var t=e.item,a=e.editable,n=e.onChange,c=e.updateParams,o=e.openClass;return r.a.createElement(r.a.Fragment,null,r.a.createElement("li",{className:"cart-item list-group-item d-flex align-items-center px-3 ".concat(o)},r.a.createElement("div",{className:"mr-3"},r.a.createElement("img",{className:"thumbnail",src:t.product.imageUrl,alt:t.product.name})),r.a.createElement("div",{className:"flex-grow-1 d-flex flex-column h5 mb-0"},r.a.createElement("div",{className:"mb-2"},t.product.name),r.a.createElement("div",{className:"d-flex align-items-center justify-content-between"},r.a.createElement("div",{className:a?"bg-secondary text-info rounded-pill":""},r.a.createElement("div",{className:"d-flex align-items-center justify-content-start"},a&&r.a.createElement("div",{className:"update decrease p-1",onClick:function(e){return n(e,Object(U.a)({},c,{item:t,quantity:t.quantity-1}))}},r.a.createElement(Y.a,{icon:"minus-circle"}))||r.a.createElement("small",{className:"text-lighter"},"qty :"),r.a.createElement("div",{className:"font-weight-bold"},r.a.createElement("input",{onChange:function(e){return e.target.value&&n(e,Object(U.a)({},c,{item:t,quantity:parseInt(e.target.value)}))},inputMode:"numeric",pattern:"[0-9]*",type:"text",name:"quantity",value:t.quantity,disabled:!a})),a&&r.a.createElement("div",{className:"update increase p-1",onClick:function(e){return n(e,Object(U.a)({},c,{item:t,quantity:t.quantity+1}))}},r.a.createElement(Y.a,{icon:"plus-circle"})))),r.a.createElement("div",{className:a?"w-25 text-right":"text-right"},L(t.product.price*t.quantity)),a&&r.a.createElement("div",{className:"w-25"},r.a.createElement("div",{className:"update ml-auto p-1",onClick:function(e){return n(e,Object(U.a)({},c,{item:t,quantity:0}))}},r.a.createElement(Y.a,{icon:["far","trash-alt"],size:"sm"})))))))},Z=function(e){var t,a=e.openClass,c=Object(n.useContext)(C),o=c.cart,s=c.dispatch,i=function(e,t){var a=t.item,n=t.quantity;a&&void 0!==n&&s(y.UPDATE,{product:a.product,quantity:n})},u=[],m=Object(V.a)(o.items.entries());try{for(m.s();!(t=m.n()).done;){var d=Object(l.a)(t.value,2),p=d[0],f=d[1];u.push(r.a.createElement(X,{key:p.id,item:{product:p,quantity:f},editable:!0,onChange:i,updateParams:{},openClass:a}))}}catch(E){m.e(E)}finally{m.f()}return r.a.createElement(r.a.Fragment,null,u)},ee=a(33),te=a(32),ae=function(e){var t=e.props,a=e.onConfirm,n=e.onCancel;return r.a.createElement(ee.a,{show:t.show,onHide:n,centered:!0},r.a.createElement(ee.a.Header,{closeButton:!0,className:"border-0 pb-0"},r.a.createElement(ee.a.Title,null,t.caption)),r.a.createElement(ee.a.Body,{className:"pt-0"},r.a.createElement("div",{className:"cart my-3"},r.a.createElement("ul",{className:"list-group"},t.item&&r.a.createElement(X,{item:t.item,editable:!1,onChange:function(){},updateParams:{},openClass:"open"}))),r.a.createElement("div",{className:"d-flex align-items-center justify-content-end"},r.a.createElement(te.a,{variant:"outline-info",onClick:n},t.labelCancel),r.a.createElement(te.a,{variant:"danger",onClick:a,className:"ml-3"},t.labelConfirm))))},ne=function(e){var t=e.atCheckout,a=Object(n.useContext)(C),c=a.cart,o=a.dispatch,i=Object(n.useRef)(null);Object(n.useEffect)((function(){c.open&&i&&i.current&&i.current.scrollIntoView({behavior:"smooth"})}),[c.open]);var u=function(){return c.open||t?"open":""},m=function(){var e,t=[],a=Object(V.a)(c.items.entries());try{for(a.s();!(e=a.n()).done;){var n=Object(l.a)(e.value,2),o=n[0],s=n[1];t.push(r.a.createElement("div",{key:o.id,className:"py-1 py-0-sm d-flex align-items-center"},r.a.createElement("div",null,r.a.createElement("img",{className:"thumbnail",src:o.imageUrl,alt:o.name})),r.a.createElement("div",{className:"label badge badge-pill"},s)))}}catch(i){a.e(i)}finally{a.f()}return r.a.createElement("div",{className:"d-flex flex-wrap"},t)},d=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"d-flex m-3 py-1 align-items-center flex-nowrap h5"},r.a.createElement("div",null,r.a.createElement(Y.a,{icon:"shopping-cart"})),r.a.createElement("div",{className:"ml-2 font-weight-bold ".concat(!c.open&&(c.items.size?" d-none d-sm-none":"")+(c.items.size>2?" d-md-none":" d-md-block")+(c.items.size>3?" d-lg-none":" d-lg-block")+(c.items.size>6?" d-xl-none":" d-xl-block"))},"Shopping cart")),r.a.createElement("div",{className:"ml-4"},r.a.createElement(m,null)),r.a.createElement("div",{className:"ml-auto mr-4"},r.a.createElement(Y.a,{icon:"angle-up",size:"lg"})))},p=function(){return r.a.createElement(r.a.Fragment,null,c.articles?r.a.createElement("li",{className:"cart-item cart-footer list-group-item d-flex justify-content-between align-items-center flex-wrap p-0\n        ".concat(u())},r.a.createElement("div",{className:"d-flex h5 ml-auto m-3"},r.a.createElement("div",{className:"font-weight-light mr-3"},"Total:"),r.a.createElement("div",{className:"font-weight-bold"},L(c.subTotal))),r.a.createElement("div",{className:"m-2"},!t&&r.a.createElement(s.b,{to:"/checkout",className:"btn btn-primary"},"Check Out",r.a.createElement(Y.a,{icon:"angle-right",size:"lg",className:"ml-2"})))):void 0)};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"cart-offset",ref:i}),r.a.createElement("div",{className:"cart",id:"cart"},r.a.createElement("ul",{className:"list-group ".concat(c.open?"":"mx-3 m-md-3")},!t&&r.a.createElement("li",{onClick:function(){return o(y.TOGGLE)},className:"cart-header toggle p-0 list-group-item d-flex align-items-center\n          ".concat(u()," ").concat(c.blink?"blink":"")},r.a.createElement(d,null)),r.a.createElement(Z,{openClass:u()}),r.a.createElement(p,null))),r.a.createElement(ae,{onConfirm:function(){return o(y.DELETE)},onCancel:function(){return o(y.HIDE_MODAL)},props:c.modal}))},re=function(){var e=Object(n.useContext)(v),t=e.categories,a=e.products,c=Object(n.useContext)(C),o=c.cart,s=c.dispatch,l=Object(i.h)().slug,u=l?t.find((function(e){return e.slug===l})):t.find((function(e){return-1===e.id})),m=function(e){var t=Object(n.useRef)();return Object(n.useEffect)((function(){t.current=e})),t.current}(l);Object(n.useEffect)((function(){m!==l&&o.open&&s(y.TOGGLE)}),[m,l,o.open,s]),Object(n.useEffect)((function(){window.scrollTo(0,0)}),[l]);var d;return r.a.createElement(r.a.Fragment,null,!u&&r.a.createElement(i.a,{to:"/not-found"}),!l&&u&&r.a.createElement(i.a,{to:"/".concat(u.slug)}),r.a.createElement(W.a,{xs:1,sm:2,md:3,lg:4,xl:5},u&&(d=u,a.filter((function(e){return e.productCategory.find((function(e){return e.categoryId===d.id}))}))).map((function(e){return r.a.createElement(Q,{key:e.id,product:e})}))),r.a.createElement("div",{className:"".concat(o.open?"":"fixed-bottom")},r.a.createElement(W.a,null,r.a.createElement($.a,{sm:8,lg:6,className:"px-1 px-sm-3"},r.a.createElement(ne,{atCheckout:!1})))))},ce=function(e){var t=e.video,a=e.hasButton,n=e.caption,c=Object(i.g)();return r.a.createElement("div",{className:"video"},r.a.createElement("div",{className:"overlay w-100",style:{backgroundImage:t.poster}},r.a.createElement("video",{autoPlay:!0,loop:!0,muted:!0,playsInline:!0,poster:t.poster},r.a.createElement("source",{src:t.url,type:"video/mp4"})),r.a.createElement("div",{className:"description d-flex justify-content-around"},a&&r.a.createElement("div",{className:"align-self-center text-nowrap"},r.a.createElement("button",{className:"btn",onClick:c.goBack},r.a.createElement(Y.a,{icon:"angle-left",size:"sm",className:"mr-2"}),"back")),r.a.createElement("div",null,r.a.createElement("h1",null,n)))))},oe=a(31),se=a(15),le=function(e){var t=e.selected,a=void 0===t?0:t,c=e.onChange,o=e.errors,s=Object(n.useContext)(C).companies;return r.a.createElement(se.a.Group,{controlId:"formGroupCompany"},r.a.createElement(se.a.Label,null,"company"),r.a.createElement(se.a.Control,{as:"select",custom:!0,size:"lg",name:"companyId",defaultValue:a,onChange:c,isInvalid:!!(null===o||void 0===o?void 0:o.companyId)},s.map((function(e){return r.a.createElement("option",{value:e.id?e.id:"",key:e.id},e.name)}))),r.a.createElement(se.a.Control.Feedback,{type:"invalid"},null===o||void 0===o?void 0:o.companyId))},ie=a(36),ue=a(25),me=[{icon:"cc-visa",name:"Visa"},{icon:"cc-mastercard",name:"MasterCard"},{icon:"cc-amex",name:"Amex"}],de=function(e){var t=e.order,a=e.setOrder,n=e.errors,c=e.setErrors;return r.a.createElement("div",{className:"form-group"},r.a.createElement(se.a.Label,null,"payment method"),r.a.createElement(ie.a,{className:"d-flex flex-wrap rounded ".concat(n.paymentMethod?"border border-danger is-invalid":"border border-dark"),type:"radio",name:"options",value:t.paymentMethod,onChange:function(e){c(Object(U.a)({},n,{paymentMethod:""})),a(Object(U.a)({},t,{paymentMethod:e}))}},me.map((function(e){return r.a.createElement(ue.a,{key:e.icon,value:e.name,variant:t.paymentMethod===e.name?"secondary":"info"},r.a.createElement("div",{className:"d-flex align-items-center justify-content-center"},r.a.createElement(Y.a,{icon:["fab",e.icon],size:"2x",key:e.icon,className:"mr-2"}),r.a.createElement("span",{className:"d-none d-sm-inline font-weight-lighter"},e.name)))}))),r.a.createElement(se.a.Control.Feedback,{type:"invalid"},n.paymentMethod))},pe=function(e){var t=e.errors,a=e.setErrors,c=e.isValidEmail,o=e.isSaving,s=e.onSubmit,l=Object(n.useContext)(C),i=l.order,u=l.setOrder,m=function(e){if(e.target.name){a(Object(U.a)({},t,Object(oe.a)({},e.target.name,"")));var n=Object(oe.a)({},e.target.name,e.target.value);u(Object(U.a)({},i,{},n))}};return r.a.createElement(se.a,{onSubmit:s,noValidate:!0,className:"mt-4"},r.a.createElement(le,{selected:i.companyId,onChange:m,errors:t}),r.a.createElement(se.a.Group,{controlId:"formGroupEmail"},r.a.createElement(se.a.Label,null,"e-mail address"),r.a.createElement(se.a.Control,{type:"email",name:"createdBy",placeholder:"e-mail",size:"lg",value:i.createdBy,onChange:m,isValid:c(),isInvalid:!!t.createdBy}),r.a.createElement(se.a.Control.Feedback,{type:"invalid"},t.createdBy)),r.a.createElement(de,{order:i,setOrder:u,errors:t,setErrors:a}),r.a.createElement("div",{className:"text-right mt-4"},r.a.createElement("button",{type:"submit",className:"w-50 btn btn-primary mt-4 mt-md-0"},o?r.a.createElement(Y.a,{icon:"spinner",pulse:!0}):r.a.createElement(r.a.Fragment,null,"Place order",r.a.createElement(Y.a,{icon:"angle-right",size:"lg",className:"ml-2"})))))},fe=function(){var e=Object(n.useContext)(C),t=e.cart,a=e.dispatch,c=e.order,o=e.setOrder,s=Object(n.useState)(!1),u=Object(l.a)(s,2),m=u[0],d=u[1],p=Object(n.useState)({companyId:"",createdBy:"",paymentMethod:""}),f=Object(l.a)(p,2),E=f[0],v=f[1];Object(n.useEffect)((function(){window.scrollTo(0,0)}),[]),Object(n.useEffect)((function(){t.open&&a(y.TOGGLE)}),[t.open,a]);var b=Object(i.g)();Object(n.useEffect)((function(){t.subTotal||b.push("/")}),[b,t]);var g=function(){var e={};return h()||(e.createdBy=N),c.companyId||(e.companyId=x),c.paymentMethod||(e.paymentMethod=w),v(e),0===Object.keys(e).length},h=function(){return!!c.createdBy.match(/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,3})+$/)},O=function(){var e=Object(I.a)(k.a.mark((function e(t){var a,n,r,c;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d(!0),console.log("createdOrder:",JSON.stringify(t)),e.next=4,G(t,"orders");case 4:a=e.sent,console.log("response:",a),201!==a.status?(d(!1),a.data&&a.data.errors?(n=a.data.errors.map((function(e){return e.msg})),console.error("ERROR!",n.join("\n")),v(Object(U.a)({},E,{response:n.join("\n")}))):(r="".concat(a.status," : ").concat(a.statusText),v(Object(U.a)({},E,{response:r})))):(c=a.data,console.log("savedOrder:",JSON.stringify(c)),o(Object(U.a)({},c)),b.push("/confirmation"));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j=function(e){var a,n=[],r=Object(V.a)(t.items.entries());try{for(r.s();!(a=r.n()).done;){var c=Object(l.a)(a.value,2),o=c[0],s=c[1],i={productId:o.id,orderId:null===e||void 0===e?void 0:e.id,amount:s};n.push(i)}}catch(u){r.e(u)}finally{r.f()}return n};return r.a.createElement(r.a.Fragment,null,r.a.createElement(W.a,{xs:1,md:2},r.a.createElement($.a,{className:"mt-2 p-0"},r.a.createElement(ne,{atCheckout:!0})),r.a.createElement($.a,null,r.a.createElement(pe,{errors:E,setErrors:v,isValidEmail:h,isSaving:m,onSubmit:function(e){if(e.preventDefault(),g()){delete c.id;var a=Object(U.a)({},c,{created:(new Date).toISOString(),totalPrice:t.subTotal,orderRows:j(c)});O(a)}}}),!!E&&!!E.response&&r.a.createElement("div",{className:"alert alert-danger mt-4 mb-0"},E.response))))},Ee=function(e){var t,a,c,o=e.items,s=e.editable,l=e.onChange,i=e.updateParams,u=e.openClass,m=Object(n.useContext)(v).products;return!o&&(null===i||void 0===i?void 0:i.order)&&(c=null===(t=i.order)||void 0===t?void 0:t.orderRows,o=c?c.map((function(e){return{product:m.find((function(t){return t.id===e.productId})),quantity:e.amount}})):[]),r.a.createElement(r.a.Fragment,null,null===(a=o)||void 0===a?void 0:a.map((function(e){return!!e.product&&r.a.createElement(X,{key:e.product.id,item:e,editable:s,onChange:l,updateParams:Object(U.a)({},i,{items:o}),openClass:u})})))},ve=function(){var e=Object(n.useContext)(C),t=e.companies,a=e.cart,c=e.dispatch,o=e.order,s=Object(n.useState)(""),i=Object(l.a)(s,2),u=i[0],m=i[1];return Object(n.useEffect)((function(){window.scrollTo(0,0)}),[]),Object(n.useEffect)((function(){a.items.size&&function(){var e="";if(o.orderRows){var t;(null===(t=o.orderRows)||void 0===t?void 0:t.length)!==a.items.size&&(e="Order contains wrong number of items.");var n,r=0,s=Object(V.a)(a.items.entries());try{for(s.s();!(n=s.n()).done;){var i=Object(l.a)(n.value,2),u=i[0],d=i[1],p=o.orderRows[r];u.id===p.productId&&d===p.amount||(e='Order contains wrong quantity of "'.concat(u.name,'": ').concat(p.amount," should be ").concat(d,"!")),r++}}catch(f){s.e(f)}finally{s.f()}}else e="Order is empty!";if(!e)return c(y.RESET),"";m(e)}()}),[a.items,c,o.orderRows]),r.a.createElement(r.a.Fragment,null,r.a.createElement(W.a,null,r.a.createElement("h1",{className:"m-4 text-secondary"},"Order confirmation")),r.a.createElement(W.a,null,r.a.createElement($.a,{xs:12,lg:6,className:"mb-4"},r.a.createElement("div",{className:"cart open"},r.a.createElement("ul",{className:"list-group open"},r.a.createElement(Ee,{editable:!1,onChange:function(){},updateParams:{order:o},openClass:"open"}),r.a.createElement("li",{className:"cart-item cart-footer h5 list-group-item d-flex justify-content-end open"},r.a.createElement("div",{className:"font-weight-bold d-flex m-0"},r.a.createElement("div",{className:"font-weight-light mr-3"},"Total:"),r.a.createElement("div",null,L(o.totalPrice)))))),!!u&&r.a.createElement("div",{className:"alert alert-danger mt-4 mb-0"},u)),r.a.createElement($.a,null,r.a.createElement("div",{className:"cart open"},r.a.createElement("ul",{className:"list-group open m-0"},r.a.createElement("li",{className:"cart-item list-group-item d-flex align-items-center justify-content-between open"},r.a.createElement("div",{className:"font-weight-light"},"order #"),r.a.createElement("div",null,M(o.id))),r.a.createElement("li",{className:"cart-item list-group-item d-flex align-items-center justify-content-between open"},r.a.createElement("div",{className:"font-weight-light"},"customer"),r.a.createElement("div",null,t.map((function(e){return e.id===o.companyId?e.name:void 0})))),r.a.createElement("li",{className:"cart-item list-group-item d-flex align-items-center justify-content-between open"},r.a.createElement("div",{className:"font-weight-light"},"order created"),r.a.createElement("div",{className:"text-nowrap"},new Date(o.created).toLocaleString("en-gb"))),r.a.createElement("li",{className:"cart-item list-group-item d-flex align-items-center justify-content-between open"},r.a.createElement("div",{className:"font-weight-light"},"e-mail"),r.a.createElement("div",null,o.createdBy)),r.a.createElement("li",{className:"cart-item list-group-item d-flex align-items-center justify-content-between open"},r.a.createElement("div",{className:"font-weight-light"},"payment method"),r.a.createElement("div",null,o.paymentMethod)))))))},be=function(){return r.a.createElement("div",{className:"d-flex align-items-center vh-100"},r.a.createElement("div",{className:"container text-center text-primary"},r.a.createElement(Y.a,{icon:"spinner",size:"10x",pulse:!0})))},ge=[{id:-1,name:"No products",description:"",price:0,imageUrl:"",year:0,added:new Date,productCategory:[]}],he=function(e){var t=e.setClearSearch,a=e.video,c=Object(n.useContext)(v).products,o=Object(n.useContext)(C).cart,s=Object(i.h)().slug,u=Object(n.useState)([]),m=Object(l.a)(u,2),d=m[0],p=m[1],f=Object(n.useState)(!0),E=Object(l.a)(f,2),b=E[0],h=E[1];return Object(n.useEffect)((function(){h(!d.length)}),[b,d]),Object(n.useEffect)((function(){if(window.scrollTo(0,0),s){!function(){console.time("hits");var e=g()(s,{lower:!0}),t=Array.from(new Set(c.filter((function(t){return g()(t.name,{lower:!0}).indexOf(e)>=0}))));console.timeEnd("hits"),p((null===t||void 0===t?void 0:t.length)?t:ge)}()}}),[s,c]),Object(n.useEffect)((function(){return function(){t(!0)}}),[t]),r.a.createElement(r.a.Fragment,null,!s&&r.a.createElement(i.a,{to:"/"}),(!d||!d.length)&&r.a.createElement(be,null)||d===ge&&r.a.createElement(ce,{video:a,hasButton:!1,caption:"Nope"})||r.a.createElement(W.a,{xs:1,sm:2,md:3,lg:4,xl:5},d.map((function(e){return r.a.createElement(Q,{key:e.id,product:e})}))),r.a.createElement("div",{className:"".concat(o.open?"":"fixed-bottom")},r.a.createElement(W.a,null,r.a.createElement($.a,{sm:8,lg:6,className:"px-1 px-sm-3"},r.a.createElement(ne,{atCheckout:!1})))))},ye=function(){return r.a.createElement("footer",null,r.a.createElement("div",null,r.a.createElement("div",null,"\xa9 2020 Christofer Laurin"),r.a.createElement("div",null,"".concat(A.name," ").concat(A.version," ").concat("production"))))},Oe=["Confirmed","Completed","Pending","Shipped","Received","Denied","Cancelled","Refunded"],je=["#395f97","#327694","#2d7b64","#5d8039","#ac833a","#97527a","#95373c","#6e5c9d"],Ne=Object(n.createContext)({orderStatusArray:Oe,orderStatusColors:je,statusFilter:0,setStatusFilter:function(){},statusMatches:[],setStatusMatches:function(){},changeOrderStatus:function(){},updateItem:function(){},saveOrder:function(){var e=Object(I.a)(k.a.mark((function e(){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(){})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),deleteOrder:function(){var e=Object(I.a)(k.a.mark((function e(){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(){})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()});!function(e){e[e.DEFAULT=0]="DEFAULT",e[e.DIRTY=1]="DIRTY",e[e.SAVING=2]="SAVING",e[e.SAVED=3]="SAVED",e[e.DELETING=4]="DELETING",e[e.DELETED=5]="DELETED"}(_||(_={}));var xe=function(e){var t=e.order,a=e.selected,c=void 0===a?0:a,o=e.onChange,s=Object(n.useContext)(Ne),l=s.orderStatusArray,i=s.orderStatusColors,u=void 0!==c?i[c]:void 0!==(null===t||void 0===t?void 0:t.status)?i[t.status]:"inherit";return r.a.createElement("select",{name:"orderStatus",className:"w-100 badge-select text-white",style:{color:u,backgroundColor:"transparent"},defaultValue:c,onChange:function(e){return o(e,t)}},l.map((function(e,t){return r.a.createElement("option",{value:t,key:e,style:{color:i[t]}},e)})))},we=[{icon:"cc-visa",name:"Visa"},{icon:"cc-mastercard",name:"MasterCard"},{icon:"cc-amex",name:"Amex"}],Ce=function(e){var t=e.name,a=e.size,n=we.find((function(e){return e.name.toLowerCase()===t.toLowerCase()}));return n?r.a.createElement(Y.a,{icon:["fab",n.icon],size:a}):r.a.createElement(r.a.Fragment,null)},Se=function(e){var t=e.order,a=Object(n.useContext)(Ne),c=a.orderStatusColors,o=a.statusFilter,s=a.changeOrderStatus,i=a.updateItem,u=a.saveOrder,m=a.deleteOrder,d=Object(n.useState)(""),p=Object(l.a)(d,2),f=p[0],E=p[1],v=Object(n.useState)(t.status),b=Object(l.a)(v,2),g=b[0],h=b[1],y=function(){var e=Object(n.useState)(!1),t=Object(l.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(!1),o=Object(l.a)(c,2),s=o[0],i=o[1],u=Object(n.useState)(!1),m=Object(l.a)(u,2),d=m[0],p=m[1],f=Object(n.useState)(!1),E=Object(l.a)(f,2),v=E[0],b=E[1],g=Object(n.useState)(!1),h=Object(l.a)(g,2),y=h[0],O=h[1];Object(n.useEffect)((function(){d&&setTimeout((function(){return p(!1)}),1e3)}),[d]),Object(n.useEffect)((function(){s&&d&&i(!1)}),[s,d]),Object(n.useEffect)((function(){y&&setTimeout((function(){return O(!1)}),1e3)}),[y]),Object(n.useEffect)((function(){v&&y&&b(!1)}),[v,y]);return[{isDirty:a,isSaving:s,isSaved:d,isDeleting:v,isDeleted:y},function(e){switch(e){case _.DIRTY:p(!1),r(!0);break;case _.SAVING:i(!0);break;case _.SAVED:r(!1),p(!0);break;case _.DELETING:b(!0)}}]}(),O=Object(l.a)(y,2),j=O[0],N=j.isDirty,x=j.isSaving,w=j.isSaved,C=j.isDeleting,S=j.isDeleted,D=O[1],T=function(e){D(_.DIRTY),h(parseInt(e.target.value)),f||R()},F=function(){var e=Object(I.a)(k.a.mark((function e(t){var a;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return D(_.SAVING),g&&g!==t.status&&(s(g,t),R()),e.next=4,u(t);case 4:(a=e.sent)&&a.status&&[200,204].includes(a.status)&&D(_.SAVED);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),A=function(){var e=Object(I.a)(k.a.mark((function e(t){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:D(_.DELETING),m(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),R=function(){E(""===f?"open":"")},P=void 0!==g?c[g]:void 0!==(null===t||void 0===t?void 0:t.status)?c[t.status]:"inherit",G=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"w-20"},M(t.id)),r.a.createElement("div",{className:"w-30 badge badge-pill",style:{backgroundColor:P}},r.a.createElement(xe,{order:t,onChange:T,selected:g})),r.a.createElement("div",{className:"w-40 d-flex flex-wrap align-items-center"},r.a.createElement("div",{className:"ml-4"},new Date(t.created).toLocaleDateString("en-gb")),r.a.createElement("div",{className:"ml-auto"},L(t.totalPrice))),r.a.createElement("div",{className:"ml-auto"},r.a.createElement(Y.a,{icon:"angle-up"})))},q=function(){return r.a.createElement("li",{className:"cart-item cart-footer list-group-item d-flex justify-content-between align-items-center flex-wrap p-2 pl-3 m-0 ".concat(f)},r.a.createElement("div",null,r.a.createElement(Ce,{name:t.paymentMethod,size:"sm"})),r.a.createElement("div",{className:"flex-grow-1 overflow-hidden mx-2"},r.a.createElement("small",null,t.createdBy)),r.a.createElement("div",{className:"w-25"},r.a.createElement("button",{type:"button",className:"w-100 btn btn-danger",onClick:function(){return A(t)}},C&&r.a.createElement(Y.a,{icon:"spinner",pulse:!0})||S&&r.a.createElement(Y.a,{icon:"check"})||"Delete")),t.totalPrice?r.a.createElement("div",{className:"w-25 ml-2"},r.a.createElement("button",{type:"button",className:"w-100 btn ".concat(w?"btn-success":N?"btn-primary":"btn-outline-secondary"),disabled:!N,onClick:function(){return F(t)}},x&&r.a.createElement(Y.a,{icon:"spinner",pulse:!0})||w&&r.a.createElement(Y.a,{icon:"check"})||"Save")):void 0)};return r.a.createElement(r.a.Fragment,null,(-1===o||t.status===o)&&r.a.createElement("li",{className:"list-group-item p-0 mb-3"},r.a.createElement("ul",{className:"list-group"},r.a.createElement("li",{className:"toggle list-group-item d-flex align-items-center justify-content-between py-2 ".concat(f),onClick:function(e){e.target.className.includes("badge-select")||R()}},r.a.createElement(G,null)),r.a.createElement(Ee,{editable:!0,onChange:function(e,t){D(_.DIRTY),i(t)},updateParams:{order:t},openClass:f}),r.a.createElement(q,null))))},ke=function(e){var t=e.statusFilter,a=e.statusMatches,c=e.changeStatusFilter,o=Object(n.useContext)(Ne),s=o.orderStatusArray,l=o.orderStatusColors;return r.a.createElement("div",{className:"my-3 w-100"},r.a.createElement(ie.a,{className:"select-order d-flex flex-wrap w-100",type:"radio",name:"options",value:t,onChange:function(e){c(e)}},r.a.createElement(ue.a,{value:-1,variant:-1===t?"secondary":"info",size:"sm"},"All",r.a.createElement("span",{className:"badge badge-pill bg-dark text-light ml-2"},a.reduce((function(e,t){return e+t}),0))),s.map((function(e,n){return a[n]?r.a.createElement(ue.a,{key:e,value:n,variant:t===n?"secondary":"info",size:"sm"},e,r.a.createElement("span",{className:"badge badge-pill text-light ml-2",style:{backgroundColor:l[n]}},a[n])):void 0}))))},Ie=function(e){var t=e.orders,a=Object(n.useContext)(Ne).orderStatusArray,c=Object(n.useContext)(Ne),o=c.statusFilter,s=c.setStatusFilter,l=c.statusMatches,i=c.setStatusMatches;return Object(n.useEffect)((function(){for(var e=[],n=function(a){var n=0;t.forEach((function(e){e.status===a&&n++})),e.push(n)},r=0;r<a.length;r++)n(r);i(e)}),[t,a,i]),r.a.createElement("div",{className:"cart open"},t.length?r.a.createElement(ke,{statusFilter:o,statusMatches:l,changeStatusFilter:function(e){e<a.length&&s(e)}}):void 0,r.a.createElement("ul",{className:"list-group m-0 open"},t.map((function(e){return r.a.createElement(Se,{key:e.id,order:e})}))))},De=function(){var e=Object(n.useContext)(C).companies,t=Object(n.useState)([]),a=Object(l.a)(t,2),c=a[0],o=a[1],s=Object(n.useState)(!0),u=Object(l.a)(s,2),m=u[0],d=u[1],p=Object(n.useState)(-1),f=Object(l.a)(p,2),E=f[0],v=f[1],b=Object(n.useState)([]),g=Object(l.a)(b,2),h=g[0],y=g[1],O=Object(i.h)().slug,j=Object(i.g)(),N=e.find((function(e){return e.slug===(null===O||void 0===O?void 0:O.toLowerCase())})),x=N?N.id:0;Object(n.useEffect)((function(){h[E]||v(-1)}),[E,h]),Object(n.useEffect)((function(){x?function(){var e=Object(I.a)(k.a.mark((function e(){var t;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P("orders?companyId=".concat(x));case 2:(t=e.sent).sort((function(e,t){return e.created<t.created?1:-1})),o(t),d(!1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()():d(!1)}),[x]);var w=function(){var e=Object(I.a)(k.a.mark((function e(t){var a;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G(t,"orders",t.id);case 2:return a=e.sent,console.log("save order:",JSON.stringify(t)),console.log("response:",a),e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=function(e){var t=c.filter((function(t){return t!==e})).concat([e]).sort((function(e,t){return e.created<t.created?1:-1}));o(t)},D=function(){var e=Object(I.a)(k.a.mark((function e(t){var a,n;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.id){e.next=8;break}return e.next=3,q("orders",t.id);case 3:return a=e.sent,console.log("delete order:",JSON.stringify(t)),console.log("response:",a),a&&a.status&&200===a.status&&(n=c.filter((function(e){return e!==t})).sort((function(e,t){return e.created<t.created?1:-1})),o(n)),e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=function(e){var t=0;return e.map((function(e){return t+=e.product.price*e.quantity})),t},F=function(e,t){return e.map((function(e){return{productId:e.product.id,orderId:t,amount:e.quantity}}))};return r.a.createElement(Ne.Provider,{value:{orderStatusArray:Oe,orderStatusColors:je,statusFilter:E,setStatusFilter:v,statusMatches:h,setStatusMatches:y,changeOrderStatus:function(e,t){t.status=e;var a=c.filter((function(e){return e!==t})).concat([t]).sort((function(e,t){return e.created<t.created?1:-1}));o(a)},updateItem:function(e){var t=e.items,a=e.item,n=e.order,r=e.quantity;t&&a&&n&&(r?a.quantity=r:t=t.filter((function(e){return e!==a})),n.totalPrice=T(t),n.orderRows=F(t,n.id),S(n))},saveOrder:w,deleteOrder:D}},r.a.createElement(W.a,null,r.a.createElement($.a,null,r.a.createElement("h1",{className:"pt-4 text-secondary"},"Order admin")),r.a.createElement($.a,{xs:12,sm:6,className:"my-2"},r.a.createElement(le,{selected:x,onChange:function(t){var a=parseInt(t.target.value),n=e.find((function(e){return e.id===a})),r=n?n.slug:"";j.push("/admin/".concat(r))}}))),r.a.createElement(W.a,null,r.a.createElement($.a,null,m?r.a.createElement(be,null):r.a.createElement(Ie,{orders:c}))))},Te=function(){var e=function(){var e=Object(n.useState)(!0),t=Object(l.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)([]),o=Object(l.a)(c,2),s=o[0],i=o[1],u=Object(n.useState)([]),m=Object(l.a)(u,2),d=m[0],p=m[1];Object(n.useEffect)((function(){r(!(s.length&&d.length))}),[a,s,d]),Object(n.useEffect)((function(){(function(){var e=Object(I.a)(k.a.mark((function e(){var t;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P("categories",!0);case 2:(t=e.sent).unshift(E),t.map((function(e){return e.slug=g()(e.name,{lower:!0})})),i(t);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(n.useEffect)((function(){(function(){var e=Object(I.a)(k.a.mark((function e(){var t;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P("products",!0);case 2:t=e.sent,f(t),t.sort((function(e,t){return e.name>t.name?1:-1})),p(t);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var f=function(e){e.sort((function(e,t){return e.added<t.added?1:-1})),e.slice(0,4).map((function(e){return e.productCategory.push({categoryId:E.id})}))};return{categories:s,products:d,loading:a}}(),t=e.categories,a=e.products,c=e.loading,o=J(a),s=Object(l.a)(o,2),m=s[0],d=s[1],p=Object(n.useState)(j),f=Object(l.a)(p,2),b=f[0],y=f[1],O=Object(n.useState)(!1),N=Object(l.a)(O,2),x=N[0],w=N[1],S=function(){var e=Object(n.useState)({url:"",poster:""}),t=Object(l.a)(e,2),a=t[0],r=t[1];return Object(n.useEffect)((function(){(function(){var e=Object(I.a)(k.a.mark((function e(){var t,a,n;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z("".concat(A.root,"/media/404.mkv"));case 2:t=e.sent,a=window.URL.createObjectURL(t),n="".concat(A.root,"/media/404.jpg"),r({url:a,poster:n});case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),a}();return c?r.a.createElement(be,null):r.a.createElement("div",{id:"content"},r.a.createElement(v.Provider,{value:{categories:t,products:a,news:{NEWS_CATEGORY:E,NUMBER_OF_ITEMS_IN_NEWS:4}}},r.a.createElement(C.Provider,{value:{companies:h,cart:m,dispatch:d,order:b,setOrder:y}},r.a.createElement(H,{clearSearch:x,setClearSearch:w}),r.a.createElement(u.a,{fluid:!0,as:"main"},r.a.createElement(i.d,null,r.a.createElement(i.b,{path:"/checkout"},r.a.createElement(fe,null)),r.a.createElement(i.b,{path:"/confirmation"},r.a.createElement(ve,null)),r.a.createElement(i.b,{path:"/not-found"},r.a.createElement(ce,{video:S,hasButton:!0,caption:"404"})),r.a.createElement(i.b,{path:"/admin",exact:!0},r.a.createElement(De,null)),r.a.createElement(i.b,{path:"/admin/:slug"},r.a.createElement(De,null)),r.a.createElement(i.b,{path:"/search/:slug"},r.a.createElement(he,{setClearSearch:w,video:S})),r.a.createElement(i.b,{path:"/:slug"},r.a.createElement(re,null)),r.a.createElement(i.a,{from:"/",exact:!0,to:"/newly-added"}),r.a.createElement(i.b,null,r.a.createElement(i.a,{to:"/not-found"})))),r.a.createElement(ye,null))))};o.a.render(r.a.createElement(s.a,{basename:"/react-webshop"},r.a.createElement(Te,null)),document.getElementById("root"))}},[[61,1,2]]]);
//# sourceMappingURL=main.79e9865d.chunk.js.map