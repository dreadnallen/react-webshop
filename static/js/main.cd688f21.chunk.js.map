{"version":3,"sources":["media/404.mkv","media/404.jpg","lib/api.ts","lib/FontAwesome.ts","components/Navigation.tsx","lib/utils.ts","components/CategoryBadges.tsx","components/ProductCard.tsx","components/CartItems.tsx","components/Cart.tsx","components/ProductsPage.tsx","components/NotFound.tsx","components/CheckoutForm.tsx","components/Checkout.tsx","components/OrderItems.tsx","components/Confirmation.tsx","components/Loading.tsx","components/SearchHits.tsx","components/Footer.tsx","components/App.tsx","index.tsx"],"names":["module","exports","apiClient","axios","create","baseURL","responseType","headers","get","slug","a","cache","response","data","length","localStorage","setItem","APP_INFO","name","JSON","stringify","getItem","parse","save","input","id","put","post","library","add","faShoppingCart","faAngleUp","faAngleLeft","faAngleRight","faPlusCircle","faMinusCircle","faSpinner","faSearch","faTimes","faTrashAlt","faCcVisa","faCcMastercard","faCcAmex","Navigation","categories","clearSearch","setClearSearch","history","useHistory","inputRef","useRef","toggleRef","useEffect","current","value","hideSearch","noDelay","checked","setTimeout","className","map","category","to","key","ref","type","onChange","focus","placeholder","aria-label","e","encodeURIComponent","target","push","htmlFor","icon","getCurrencyFormat","number","Intl","NumberFormat","style","currency","minimumFractionDigits","maximumFractionDigits","format","CategoryBadges","product","result","filter","productCategory","find","pc","categoryId","c","ProductCard","addToCart","alt","src","imageUrl","description","price","onClick","CartItem","quantity","updateCart","openClass","parseInt","inputMode","pattern","CartItems","cart","items","entries","Cart","toggleCart","atCheckout","cartRef","open","scrollIntoView","behavior","classOpen","Thumbnails","Header","size","Footer","articles","subTotal","undefined","blink","ProductsPage","products","useParams","currentCategory","window","scrollTo","cat","NotFound","hasButton","caption","autoPlay","loop","muted","playsInline","poster","video","goBack","CheckoutForm","onSubmit","companies","errors","company","index","companyId","createdBy","method","paymentMethod","Checkout","order","setOrder","useState","setErrors","formIsValid","formData","err","email","emailIsValid","Object","keys","match","submitOrder","createdOrder","console","log","savedOrder","getOrderRows","_order","orderRow","productId","orderId","amount","preventDefault","FormData","values","created","Date","toISOString","v","newOrder","totalPrice","orderRows","OrderItems","item","Confirmation","resetCart","clear","removeItem","error","counter","validateOrder","toLocaleString","Loading","pulse","NO_MOVIES","year","added","SearchHits","foundProducts","setFoundProducts","loading","setLoading","hits","hit","includes","setProductsAsync","version","process","emptyCart","Map","emptyOrder","status","packageJSON","NEWS_CATEGORY","App","setCategories","setProducts","setCart","API","unshift","slugify","lower","setCategoriesAsync","_products","populateNewsCategory","sort","x","y","forEach","cartString","itemsString","_cart","itemsArray","m","initialCart","slice","newCartItems","has","currentQty","set","getTotals","delete","path","from","exact","ReactDOM","render","basename","document","getElementById"],"mappings":"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","file":"static/js/main.cd688f21.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/404.9a16ef39.mkv\";","module.exports = __webpack_public_path__ + \"static/media/404.6d0d39ed.jpg\";","import axios, { AxiosInstance } from \"axios\";\r\nimport { APP_INFO } from \"../components/App\";\r\n\r\nconst apiClient: AxiosInstance = axios.create({\r\n  baseURL: \"https://medieinstitutet-wie-products.azurewebsites.net/api\",\r\n  responseType: \"json\",\r\n  headers: { \"Content-Type\": \"application/json\" }\r\n});\r\n\r\nexport const get = async <T extends {}>(\r\n  slug: string,\r\n  cache: boolean = false\r\n) => {\r\n  try {\r\n    const response = await apiClient.get<T[]>(`/${slug}`);\r\n    const data = response.data;\r\n    if (data && data.length && cache)\r\n      localStorage.setItem(`${APP_INFO.name}.${slug}`, JSON.stringify(data));\r\n    return data;\r\n  } catch (err) {\r\n    const data = localStorage.getItem(`${APP_INFO.name}.${slug}`);\r\n    if (data && data.length) return JSON.parse(data) as T[];\r\n    if (err && err.response) return err.response.data;\r\n    throw err;\r\n  }\r\n};\r\n\r\nexport const save = async <T extends {}>(\r\n  input: T,\r\n  slug: string,\r\n  id?: number\r\n) => {\r\n  try {\r\n    if (id) {\r\n      const response = await apiClient.put<T>(`/${slug}/${id}`, input);\r\n      const data = response.data;\r\n      return data;\r\n    } else {\r\n      const response = await apiClient.post<T>(`/${slug}`, input);\r\n      const data = response.data;\r\n      return data;\r\n    }\r\n  } catch (err) {\r\n    if (err & err.response) return err.response.data;\r\n    throw err;\r\n  }\r\n};\r\n","// icons\r\nimport { library } from \"@fortawesome/fontawesome-svg-core\";\r\nimport {\r\n  faShoppingCart,\r\n  faAngleUp,\r\n  faAngleLeft,\r\n  faAngleRight,\r\n  faPlusCircle,\r\n  faMinusCircle,\r\n  faSpinner,\r\n  faSearch,\r\n  faTimes\r\n} from \"@fortawesome/free-solid-svg-icons\";\r\nimport { faTrashAlt } from \"@fortawesome/free-regular-svg-icons\";\r\nimport {\r\n  faCcVisa,\r\n  faCcMastercard,\r\n  faCcAmex\r\n} from \"@fortawesome/free-brands-svg-icons\";\r\n\r\nlibrary.add(\r\n  faShoppingCart,\r\n  faAngleUp,\r\n  faAngleLeft,\r\n  faAngleRight,\r\n  faPlusCircle,\r\n  faMinusCircle,\r\n  faSpinner,\r\n  faSearch,\r\n  faTimes,\r\n  faTrashAlt,\r\n  faCcVisa,\r\n  faCcMastercard,\r\n  faCcAmex\r\n);\r\n","import React, { ChangeEvent, useRef, useEffect, Dispatch } from \"react\";\r\nimport { NavLink, useHistory } from \"react-router-dom\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\n\r\ninterface NavigationProps {\r\n  categories: ProductCategory[];\r\n  clearSearch: boolean;\r\n  setClearSearch: Dispatch<React.SetStateAction<boolean>>;\r\n}\r\n\r\nconst Navigation: React.FC<NavigationProps> = ({\r\n  categories,\r\n  clearSearch,\r\n  setClearSearch\r\n}) => {\r\n  const history = useHistory();\r\n  const inputRef = useRef<HTMLInputElement>(null);\r\n  const toggleRef = useRef<HTMLInputElement>(null);\r\n\r\n  useEffect(() => {\r\n    if (clearSearch && inputRef.current) {\r\n      inputRef.current.value = \"\";\r\n      hideSearch();\r\n    }\r\n    setClearSearch(false);\r\n  }, [clearSearch]);\r\n\r\n  const handleChange = (e: ChangeEvent<HTMLInputElement>) => {\r\n    const input: string = encodeURIComponent(e.target.value);\r\n    if (!input) hideSearch();\r\n    else input.length > 1 && history.push(`/search/${input}`);\r\n  };\r\n\r\n  const hideSearch = (noDelay?: boolean) => {\r\n    if (!noDelay) setTimeout(() => hideSearch(true), 2000);\r\n    else\r\n      !(inputRef && inputRef.current && inputRef.current.value) &&\r\n        toggleRef &&\r\n        toggleRef.current &&\r\n        (toggleRef.current.checked = false);\r\n  };\r\n\r\n  const focusSearch = () => {\r\n    if (toggleRef.current?.checked) inputRef.current?.focus();\r\n  };\r\n\r\n  return (\r\n    <div className=\"bg-secondary sticky-top px-2 py-1\">\r\n      <nav className=\"nav nav-pills nav-fill align-items-center\">\r\n        {categories.map(category => {\r\n          return (\r\n            <NavLink\r\n              className=\"nav-item nav-link h3 py-1 my-1\"\r\n              to={`/${category.slug}`}\r\n              key={category.id}\r\n            >\r\n              {category.name}\r\n            </NavLink>\r\n          );\r\n        })}\r\n        <div className=\"nav-item\">\r\n          <input\r\n            ref={toggleRef}\r\n            type=\"checkbox\"\r\n            id=\"search-toggle\"\r\n            onChange={focusSearch}\r\n          />\r\n          <div className=\"search mx-4 my-0 align-self-center\">\r\n            <div className=\"d-flex\">\r\n              <input\r\n                ref={inputRef}\r\n                className=\"form-control\"\r\n                type=\"search\"\r\n                placeholder=\"Search\"\r\n                aria-label=\"Search\"\r\n                onChange={handleChange}\r\n              />\r\n            </div>\r\n          </div>\r\n          <label\r\n            className=\"search-open btn btn-secondary m-0\"\r\n            htmlFor=\"search-toggle\"\r\n          >\r\n            <FontAwesomeIcon icon=\"search\" />\r\n          </label>\r\n        </div>\r\n      </nav>\r\n    </div>\r\n  );\r\n};\r\nexport default Navigation;\r\n","export const getCurrencyFormat: (number: number) => string = (number: number) =>\r\n  new Intl.NumberFormat(\"se-SV\", {\r\n    style: \"currency\",\r\n    currency: \"SEK\",\r\n    minimumFractionDigits: 0,\r\n    maximumFractionDigits: 0\r\n  }).format(number);\r\n","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\ninterface CategoryBadges {\r\n  product: Product;\r\n  categories: ProductCategory[];\r\n}\r\n\r\nconst CategoryBadges: React.FC<CategoryBadges> = ({ product, categories }) => {\r\n  let result: React.ReactNodeArray = [];\r\n  const currentCategories = categories.filter(\r\n    category =>\r\n      category.id > 0 &&\r\n      product.productCategory?.find(pc => pc.categoryId === category.id)\r\n  );\r\n\r\n  currentCategories.map(c =>\r\n    result.push(\r\n      <Link\r\n        key={c.id}\r\n        className={`badge badge-pill mr-2 text-secondary product-category-${c.id}`}\r\n        to={`/${c.slug}`}\r\n      >\r\n        {c.name}\r\n      </Link>\r\n    )\r\n  );\r\n  return <>{result}</>;\r\n};\r\n\r\nexport default CategoryBadges;\r\n","import React from \"react\";\r\nimport { getCurrencyFormat } from \"../lib/utils\";\r\n\r\n// components\r\nimport CategoryBadges from \"./CategoryBadges\";\r\n\r\ninterface ProductCardProps {\r\n  product: Product;\r\n  categories: ProductCategory[];\r\n  addToCart: AddToCart;\r\n}\r\n\r\nconst ProductCard: React.FC<ProductCardProps> = ({\r\n  product,\r\n  categories,\r\n  addToCart\r\n}) => {\r\n  return (\r\n    <div className=\"d-flex\">\r\n      <div className=\"card m-3 bg-dark shadow-sm\">\r\n        <div className=\"overlay\">\r\n          <img\r\n            className=\"card-img-top img-fluid\"\r\n            alt={product.name}\r\n            src={product.imageUrl}\r\n          />\r\n          <div className=\"card-description\">\r\n            <h4>{product.name}</h4>\r\n            <p>{product.description}</p>\r\n          </div>\r\n        </div>\r\n        <div className=\"card-footer\">\r\n          <div className=\"d-flex mb-3\">\r\n            <CategoryBadges product={product} categories={categories} />\r\n          </div>\r\n          <div className=\"d-flex flex-md-wrap align-items-center\">\r\n            <div className=\"h5 font-weight-bold mb-0 mr-auto\">\r\n              {getCurrencyFormat(product.price)}\r\n            </div>\r\n            <button\r\n              className=\"btn btn-primary\"\r\n              onClick={() => addToCart(product, 1)}\r\n            >\r\n              Add to cart\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ProductCard;\r\n","import React, { ChangeEvent } from \"react\";\r\nimport { getCurrencyFormat } from \"../lib/utils\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\n\r\ninterface CartItemProps {\r\n  product: Product;\r\n  quantity: number;\r\n  updateCart: UpdateCart;\r\n  openClass: string;\r\n}\r\n\r\nconst CartItem: React.FC<CartItemProps> = ({\r\n  product,\r\n  quantity,\r\n  updateCart,\r\n  openClass\r\n}) => {\r\n  return (\r\n    <li className={`cart-item list-group-item d-flex px-3 pb-2 ${openClass}`}>\r\n      <div className=\"mr-3\">\r\n        <img className=\"thumbnail\" src={product.imageUrl} alt={product.name} />\r\n      </div>\r\n      <div className=\"flex-grow-1 d-flex flex-column h5\">\r\n        <div>{product.name}</div>\r\n        <div className=\"d-flex align-items-center justify-content-between mt-2\">\r\n          <div>\r\n            <div className=\"d-flex align-items-center justify-content-start\">\r\n              <div\r\n                className=\"update p-2\"\r\n                onClick={() => updateCart(product, quantity - 1)}\r\n              >\r\n                <FontAwesomeIcon icon=\"minus-circle\" />\r\n              </div>\r\n              <div className=\"font-weight-bold\">\r\n                <input\r\n                  onChange={(e: ChangeEvent<HTMLInputElement>) =>\r\n                    updateCart(product, parseInt(e.target.value))\r\n                  }\r\n                  inputMode=\"numeric\"\r\n                  pattern=\"[0-9]*\"\r\n                  type=\"text\"\r\n                  name=\"quantity\"\r\n                  value={quantity}\r\n                />\r\n              </div>\r\n              <div\r\n                className=\"update p-2\"\r\n                onClick={() => updateCart(product, quantity + 1)}\r\n              >\r\n                <FontAwesomeIcon icon=\"plus-circle\" />\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div className=\"w-25 text-right\">\r\n            {getCurrencyFormat(product.price * quantity)}\r\n          </div>\r\n          <div\r\n            className=\"update w-25 text-right p-2\"\r\n            onClick={() => updateCart(product, 0)}\r\n          >\r\n            <FontAwesomeIcon icon={[\"far\", \"trash-alt\"]} />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </li>\r\n  );\r\n};\r\n\r\ninterface CartItemsProps {\r\n  cart: Cart;\r\n  updateCart: UpdateCart;\r\n  openClass: string;\r\n}\r\n\r\nconst CartItems: React.FC<CartItemsProps> = ({\r\n  cart,\r\n  updateCart,\r\n  openClass\r\n}) => {\r\n  const result = [];\r\n  for (let [product, quantity] of cart.items.entries()) {\r\n    result.push(\r\n      <CartItem\r\n        key={product.id}\r\n        product={product}\r\n        quantity={quantity}\r\n        updateCart={updateCart}\r\n        openClass={openClass}\r\n      />\r\n    );\r\n  }\r\n  return <>{result}</>;\r\n};\r\n\r\nexport default CartItems;\r\n","import React, { useRef, useEffect } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\n//components\r\nimport CartItems from \"./CartItems\";\r\n\r\n// lib\r\nimport { getCurrencyFormat } from \"../lib/utils\";\r\n\r\n// icons\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\n\r\ninterface CartProps {\r\n  cart: Cart;\r\n  updateCart: UpdateCart;\r\n  toggleCart: () => void;\r\n  atCheckout: boolean;\r\n}\r\n\r\nconst Cart: React.FC<CartProps> = ({\r\n  cart,\r\n  updateCart,\r\n  toggleCart,\r\n  atCheckout\r\n}) => {\r\n  const cartRef = useRef<HTMLDivElement>(null);\r\n\r\n  const scrollToCart = () => {\r\n    if (cart.open && cartRef && cartRef.current)\r\n      cartRef.current.scrollIntoView({ behavior: \"smooth\" });\r\n  };\r\n\r\n  useEffect(scrollToCart, [cart.open]);\r\n\r\n  const classOpen = () => {\r\n    return cart.open || atCheckout ? \"open\" : \"\";\r\n  };\r\n\r\n  const classBlink = () => {\r\n    return cart.blink ? \"blink\" : \"\";\r\n  };\r\n\r\n  const classHeader = () => {\r\n    return (\r\n      !cart.open &&\r\n      (cart.items.size ? \" d-none d-sm-none\" : \"\") +\r\n        (cart.items.size > 2 ? \" d-md-none\" : \" d-md-block\") +\r\n        (cart.items.size > 5 ? \" d-lg-none\" : \" d-lg-block\") +\r\n        (cart.items.size > 7 ? \" d-xl-none\" : \" d-xl-block\")\r\n    );\r\n  };\r\n\r\n  const Thumbnails: React.FC = () => {\r\n    const result = [];\r\n    for (let [product, quantity] of cart.items.entries()) {\r\n      result.push(\r\n        <div\r\n          key={product.id}\r\n          className=\"py-1 py-0-sm d-flex align-items-center\"\r\n        >\r\n          <div>\r\n            <img\r\n              className=\"thumbnail\"\r\n              src={product.imageUrl}\r\n              alt={product.name}\r\n            />\r\n          </div>\r\n          <div className={`label badge badge-pill`}>{quantity}</div>\r\n        </div>\r\n      );\r\n    }\r\n    return <div className=\"d-flex flex-wrap\">{result}</div>;\r\n  };\r\n\r\n  const Header: React.FC = () => {\r\n    return (\r\n      <>\r\n        <div className=\"d-flex m-3 py-1 align-items-center flex-nowrap h5\">\r\n          <div>\r\n            <FontAwesomeIcon icon=\"shopping-cart\" />\r\n          </div>\r\n          <div className={`ml-2 font-weight-bold${classHeader()}`}>\r\n            Shopping cart\r\n          </div>\r\n        </div>\r\n        <div className=\"ml-4\">\r\n          <Thumbnails />\r\n        </div>\r\n        <div className=\"ml-auto mr-4\">\r\n          <FontAwesomeIcon icon=\"angle-up\" size=\"lg\" />\r\n        </div>\r\n      </>\r\n    );\r\n  };\r\n\r\n  const Footer: React.FC = () => {\r\n    return (\r\n      <>\r\n        {cart.articles ? (\r\n          <li\r\n            className={`cart-item cart-footer list-group-item d-flex justify-content-between align-items-center flex-wrap\r\n        ${classOpen()}`}\r\n          >\r\n            <div className=\"font-weight-bold d-flex h5 m-0\">\r\n              <div className=\"mr-3\">Total:</div>\r\n              <div>{getCurrencyFormat(cart.subTotal)}</div>\r\n            </div>\r\n            <div className=\"text-right\">\r\n              {!atCheckout && (\r\n                <Link to={\"/checkout\"} className=\"btn btn-primary\">\r\n                  Check Out\r\n                  <FontAwesomeIcon\r\n                    icon=\"angle-right\"\r\n                    size=\"lg\"\r\n                    className=\"ml-2\"\r\n                  />\r\n                </Link>\r\n              )}\r\n            </div>\r\n          </li>\r\n        ) : (\r\n          undefined\r\n        )}\r\n      </>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div className=\"cart-offset\" ref={cartRef}></div>\r\n      <div className=\"cart\" id=\"cart\">\r\n        <ul className={`list-group ${cart.open ? \"\" : \"m-3\"}`}>\r\n          {!atCheckout && (\r\n            <li\r\n              onClick={toggleCart}\r\n              className={`toggle p-0 list-group-item d-flex align-items-center\r\n          ${classOpen()} ${classBlink()}`}\r\n            >\r\n              <Header />\r\n            </li>\r\n          ) // om jag lägger <li> i <Header /> funkar inte .toggle { transition:... }\r\n          }\r\n          <CartItems\r\n            cart={cart}\r\n            updateCart={updateCart}\r\n            openClass={classOpen()}\r\n          />\r\n          <Footer />\r\n        </ul>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Cart;\r\n","import React, { useEffect } from \"react\";\r\nimport { useParams, Redirect } from \"react-router-dom\";\r\n\r\n//components\r\nimport ProductCard from \"./ProductCard\";\r\nimport Cart from \"./Cart\";\r\n\r\ninterface ProductsPageProps {\r\n  categories: ProductCategory[];\r\n  products: Product[];\r\n  cart: Cart;\r\n  addToCart: AddToCart;\r\n  updateCart: UpdateCart;\r\n  toggleCart: () => void;\r\n}\r\n\r\nconst NEWS_CATEGORY = -1;\r\n\r\nconst ProductsPage: React.FC<ProductsPageProps> = ({\r\n  categories,\r\n  products,\r\n  cart,\r\n  addToCart,\r\n  updateCart,\r\n  toggleCart\r\n}) => {\r\n  const { slug } = useParams();\r\n  const currentCategory: ProductCategory | undefined = slug\r\n    ? categories.find(category => category.slug === slug)\r\n    : categories.find(category => category.id === NEWS_CATEGORY);\r\n\r\n  useEffect(() => {\r\n    window.scrollTo(0, 0);\r\n    if (cart.open) toggleCart();\r\n  }, [slug]);\r\n\r\n  const getProductsFromCategory = (category: ProductCategory) => {\r\n    return products.filter(product => {\r\n      return product.productCategory.find(\r\n        cat => cat.categoryId === category.id\r\n      );\r\n    });\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {!currentCategory && <Redirect to=\"/not-found\" />}\r\n      {!slug && currentCategory && <Redirect to={`/${currentCategory.slug}`} />}\r\n      <div className=\"row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-4 row-cols-xl-5\">\r\n        {currentCategory &&\r\n          getProductsFromCategory(currentCategory).map(product => (\r\n            <ProductCard\r\n              key={product.id}\r\n              product={product}\r\n              categories={categories}\r\n              addToCart={addToCart}\r\n            />\r\n          ))}\r\n      </div>\r\n      <div className={`${cart.open ? \"\" : \"fixed-bottom\"}`}>\r\n        <div className=\"row\">\r\n          <div className=\"col col-sm-8 col-lg-6\">\r\n            <Cart\r\n              cart={cart}\r\n              updateCart={updateCart}\r\n              toggleCart={toggleCart}\r\n              atCheckout={false}\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default ProductsPage;\r\n","import React from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\n// video\r\nimport video from \"../media/404.mkv\";\r\nimport poster from \"../media/404.jpg\";\r\n\r\n// icons\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\n\r\ninterface NotFoundProps {\r\n  hasButton: boolean;\r\n  caption: string;\r\n}\r\n\r\nconst NotFound: React.FC<NotFoundProps> = ({ hasButton, caption }) => {\r\n  const history = useHistory();\r\n  return (\r\n    <div className=\"video shadow-sm mt-3\">\r\n      <div className=\"overlay w-100\">\r\n        <video autoPlay loop muted playsInline poster={poster}>\r\n          <source src={video} type=\"video/mp4\" />\r\n        </video>\r\n        <div className=\"description d-flex justify-content-around\">\r\n          {hasButton && (\r\n            <div className=\"align-self-center text-nowrap\">\r\n              <button className=\"btn\" onClick={history.goBack}>\r\n                <FontAwesomeIcon icon=\"angle-left\" size=\"sm\" className=\"mr-2\" />\r\n                back\r\n              </button>\r\n            </div>\r\n          )}\r\n          <div>\r\n            <h1>{caption}</h1>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default NotFound;\r\n","import React from \"react\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { IconName } from \"@fortawesome/fontawesome-common-types\";\r\n\r\ninterface CheckoutFormProps {\r\n  onSubmit: HandleSubmit;\r\n  companies: string[];\r\n  errors: OrderErrors;\r\n}\r\n\r\nconst CheckoutForm: React.FC<CheckoutFormProps> = ({\r\n  onSubmit,\r\n  companies,\r\n  errors\r\n}) => {\r\n  const payMethods = [\r\n    { icon: \"cc-visa\" as IconName, name: \"Visa\" },\r\n    { icon: \"cc-mastercard\" as IconName, name: \"MasterCard\" },\r\n    { icon: \"cc-amex\" as IconName, name: \"Amex\" }\r\n  ];\r\n\r\n  return (\r\n    <form className=\"h5 mt-4\" onSubmit={onSubmit}>\r\n      <div className=\"form-group\">\r\n        <label htmlFor=\"companyId\">company</label>\r\n        <div className=\"field\">\r\n          <select\r\n            id=\"companyId\"\r\n            name=\"companyId\"\r\n            className=\"form-control form-control-lg\"\r\n          >\r\n            {companies.map((company, index) => (\r\n              <option value={index ? index : \"\"} key={company}>\r\n                {company}\r\n              </option>\r\n            ))}\r\n          </select>\r\n        </div>\r\n        {errors.companyId && (\r\n          <div className=\"alert alert-danger mt-3\">{errors.companyId}</div>\r\n        )}\r\n      </div>\r\n\r\n      <label htmlFor=\"createdBy\">e-mail</label>\r\n      <div className=\"field\">\r\n        <input\r\n          id=\"createdBy\"\r\n          name=\"createdBy\"\r\n          type=\"text\"\r\n          className=\"form-control form-control-lg\"\r\n        />\r\n      </div>\r\n      {errors.createdBy && (\r\n        <div className=\"alert alert-danger mt-3\">{errors.createdBy}</div>\r\n      )}\r\n\r\n      <div className=\"my-2\">payment method</div>\r\n      {payMethods.map(method => (\r\n        <div className=\"form-check-inline\" key={method.icon}>\r\n          <label className=\"form-check-label\">\r\n            <span>\r\n              <input\r\n                type=\"radio\"\r\n                className=\"form-check-input\"\r\n                name=\"paymentMethod\"\r\n                id={method.icon}\r\n                value={method.name}\r\n              />\r\n              <FontAwesomeIcon\r\n                icon={[\"fab\", method.icon]}\r\n                size=\"2x\"\r\n                key={method.icon}\r\n                className=\"pt-1\"\r\n              />\r\n            </span>\r\n          </label>\r\n        </div>\r\n      ))}\r\n\r\n      {errors.paymentMethod && (\r\n        <div className=\"alert alert-danger mt-3\">{errors.paymentMethod}</div>\r\n      )}\r\n      <div className=\"mt-4 text-right\">\r\n        <button type=\"submit\" className=\"btn btn-primary\">\r\n          Place Order\r\n          <FontAwesomeIcon icon=\"angle-right\" size=\"lg\" className=\"ml-2\" />\r\n        </button>\r\n      </div>\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default CheckoutForm;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\n// api\r\nimport { save } from \"../lib/api\";\r\n\r\n// components\r\nimport Cart from \"./Cart\";\r\nimport CheckoutForm from \"./CheckoutForm\";\r\n\r\ninterface CheckoutProps {\r\n  cart: Cart;\r\n  order: Order;\r\n  companies: string[];\r\n  setOrder: React.Dispatch<React.SetStateAction<Order>>;\r\n  updateCart: UpdateCart;\r\n  toggleCart: () => void;\r\n}\r\n\r\nconst Checkout: React.FC<CheckoutProps> = ({\r\n  cart,\r\n  order,\r\n  companies,\r\n  setOrder,\r\n  updateCart,\r\n  toggleCart\r\n}) => {\r\n  const [errors, setErrors] = useState<OrderErrors>({\r\n    companyId: \"\",\r\n    createdBy: \"\",\r\n    paymentMethod: \"\"\r\n  });\r\n\r\n  useEffect(() => {\r\n    if (cart.open) toggleCart();\r\n    window.scrollTo(0, 0);\r\n  }, [cart.open, toggleCart]);\r\n\r\n  const history = useHistory();\r\n\r\n  useEffect(() => {\r\n    if (!cart.subTotal) history.push(\"/\");\r\n  }, [history, cart]);\r\n\r\n  const handleSubmit: HandleSubmit = e => {\r\n    e.preventDefault();\r\n    const formData = new FormData(e.target);\r\n\r\n    if (!formIsValid(formData)) return;\r\n\r\n    const values: { [key: string]: string } = {\r\n      created: new Date().toISOString()\r\n    };\r\n\r\n    for (let [key, value] of formData.entries()) {\r\n      const k = key as string;\r\n      const v = value as string;\r\n      values[k] = v;\r\n    }\r\n\r\n    delete order.id; // important!\r\n    const newOrder = {\r\n      ...order,\r\n      ...values,\r\n      totalPrice: cart.subTotal,\r\n      orderRows: getOrderRows(order)\r\n    };\r\n    submitOrder(newOrder);\r\n  };\r\n\r\n  const formIsValid = (formData: FormData) => {\r\n    const err: OrderErrors = {};\r\n    const email = formData.get(\"createdBy\") as string;\r\n\r\n    if (!emailIsValid(email))\r\n      err.createdBy = \"Please provide correct e-mail address!\";\r\n\r\n    if (!formData.get(\"companyId\")) err.companyId = \"Please select company!\";\r\n\r\n    if (!formData.get(\"paymentMethod\"))\r\n      err.paymentMethod = \"Please select payment method!\";\r\n    setErrors(err);\r\n    return Object.keys(err).length === 0;\r\n  };\r\n\r\n  const emailIsValid = (input: string) => {\r\n    const format = /^\\w+([.-]?\\w+)*@\\w+([.-]?\\w+)*(\\.\\w{2,3})+$/;\r\n    return input.match(format);\r\n  };\r\n\r\n  const submitOrder = async (createdOrder: Order) => {\r\n    console.log(\"createdOrder:\", JSON.stringify(createdOrder));\r\n    const savedOrder: Order = await save<Order>(createdOrder, \"orders\");\r\n    // const updatedOrder: Order = {\r\n    //   ...savedOrder,\r\n    //   orderRows: getOrderRows(savedOrder)\r\n    // };\r\n    // const response = await save<Order>(updatedOrder, \"orders\", updatedOrder.id);\r\n    console.log(\"savedOrder:\", JSON.stringify(savedOrder));\r\n    setOrder({ ...savedOrder });\r\n    history.push(\"/confirmation\");\r\n  };\r\n\r\n  const getOrderRows = (_order: Order) => {\r\n    const result = [];\r\n    for (let [product, quantity] of cart.items.entries()) {\r\n      const orderRow: OrderRow = {\r\n        productId: product.id,\r\n        orderId: _order?.id,\r\n        amount: quantity\r\n      };\r\n      result.push(orderRow);\r\n    }\r\n    return result;\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div className=\"row row-cols-1 row-cols-md-2\">\r\n        <div className=\"col mt-2 p-0\">\r\n          <Cart\r\n            cart={cart}\r\n            updateCart={updateCart}\r\n            toggleCart={toggleCart}\r\n            atCheckout={true}\r\n          />\r\n        </div>\r\n        <div className=\"col\">\r\n          <CheckoutForm\r\n            onSubmit={handleSubmit}\r\n            errors={errors}\r\n            companies={companies}\r\n          />\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Checkout;\r\n","import React from \"react\";\r\nimport { getCurrencyFormat } from \"../lib/utils\";\r\n\r\ninterface OrderItemsProps {\r\n  order: Order;\r\n  products: Product[];\r\n}\r\n\r\nconst OrderItems: React.FC<OrderItemsProps> = ({ order, products }) => {\r\n  return (\r\n    <>\r\n      <li className=\"cart-item list-group-item d-flex justify-content-between font-italic open\">\r\n        <div className=\"w-50\">product</div>\r\n        <div className=\"w-25 text-center\">quantity</div>\r\n        <div className=\"w-25 text-right\">price</div>\r\n      </li>\r\n      {order.orderRows?.map(item => {\r\n        const product = products.find(product => product.id === item.productId);\r\n        return (\r\n          <li\r\n            key={product?.id}\r\n            className=\"cart-item list-group-item d-flex align-items-center justify-content-between open h5 m-0\"\r\n          >\r\n            <div className=\"w-50 d-flex align-items-center\">\r\n              <div className=\"mr-3\">\r\n                <img\r\n                  className=\"thumbnail\"\r\n                  src={product?.imageUrl}\r\n                  alt={product?.name}\r\n                />\r\n              </div>\r\n              <div>{product?.name}</div>\r\n            </div>\r\n            <div className=\"w-25 text-center\">{item.amount}</div>\r\n            <div className=\"w-25 text-right\">\r\n              {getCurrencyFormat(product ? product.price * item.amount : 0)}\r\n            </div>\r\n          </li>\r\n        );\r\n      })}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default OrderItems;\r\n","import React, { useEffect } from \"react\";\r\nimport { getCurrencyFormat } from \"../lib/utils\";\r\nimport { APP_INFO } from \"../components/App\";\r\n\r\n// components\r\nimport OrderItems from \"./OrderItems\";\r\n\r\ninterface ConfirmationProps {\r\n  cart: Cart;\r\n  order: Order;\r\n  products: Product[];\r\n  companies: string[];\r\n}\r\n\r\nconst Confirmation: React.FC<ConfirmationProps> = ({\r\n  cart,\r\n  order,\r\n  products,\r\n  companies\r\n}) => {\r\n  console.log(\"order:\", order);\r\n\r\n  useEffect(() => {\r\n    window.scrollTo(0, 0);\r\n  }, []);\r\n\r\n  const validateOrder = () => {\r\n    let error = \"\";\r\n    if (order.orderRows) {\r\n      if (order.orderRows?.length !== cart.items.size)\r\n        error = \"Order contains wrong number of items.\";\r\n      let counter = 0;\r\n      for (let [product, quantity] of cart.items.entries()) {\r\n        const orderRow = order.orderRows[counter];\r\n        if (\r\n          !(product.id === orderRow.productId && quantity === orderRow.amount)\r\n        )\r\n          error = `Order contains wrong quantity of \"${product.name}\": ${orderRow.amount} should be ${quantity}!`;\r\n        counter++;\r\n      }\r\n    } else error = \"Order is empty!\";\r\n\r\n    if (!error) {\r\n      resetCart();\r\n      return \"\";\r\n    } else return <div className=\"alert alert-danger mt-4 mb-0\">{error}</div>;\r\n  };\r\n\r\n  const resetCart = () => {\r\n    cart.items.clear();\r\n    cart.articles = 0;\r\n    cart.subTotal = 0;\r\n    cart.open = false;\r\n    localStorage.removeItem(`${APP_INFO.name}.cart`);\r\n    localStorage.removeItem(`${APP_INFO.name}.items`);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div className=\"row\">\r\n        <h1 className=\"m-4 text-secondary h2 font-weight-light\">\r\n          Order confirmation\r\n        </h1>\r\n      </div>\r\n      <div className=\"row\">\r\n        <div className=\"col col-12 col-lg-6 mb-4\">\r\n          <div className=\"cart open\">\r\n            <ul className=\"list-group open\">\r\n              <OrderItems order={order} products={products} />\r\n              <li className=\"cart-item cart-footer list-group-item d-flex justify-content-end open\">\r\n                <div className=\"font-weight-bold d-flex h5 m-0\">\r\n                  <div className=\"mr-3\">Total:</div>\r\n                  <div>{getCurrencyFormat(order.totalPrice)}</div>\r\n                </div>\r\n              </li>\r\n            </ul>\r\n          </div>\r\n          {validateOrder()}\r\n        </div>\r\n        <div className=\"col\">\r\n          <div className=\"cart open\">\r\n            <ul className=\"list-group open h5 m-0\">\r\n              <li className=\"cart-item list-group-item d-flex align-items-center justify-content-between open\">\r\n                <div>order #</div>\r\n                <div>{order.id}</div>\r\n              </li>\r\n              <li className=\"cart-item list-group-item d-flex align-items-center justify-content-between open\">\r\n                <div>customer</div>\r\n                <div>{companies[order.companyId]}</div>\r\n              </li>\r\n              <li className=\"cart-item list-group-item d-flex align-items-center justify-content-between open\">\r\n                <div>order created</div>\r\n                <div className=\"text-nowrap\">\r\n                  {new Date(order.created).toLocaleString(\"en-gb\")}\r\n                </div>\r\n              </li>\r\n              <li className=\"cart-item list-group-item d-flex align-items-center justify-content-between open\">\r\n                <div>e-mail</div>\r\n                <div>{order.createdBy}</div>\r\n              </li>\r\n              <li className=\"cart-item list-group-item d-flex align-items-center justify-content-between open\">\r\n                <div>payment method</div>\r\n                <div>{order.paymentMethod}</div>\r\n              </li>\r\n            </ul>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Confirmation;\r\n","import React from \"react\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\n\r\nconst Loading = () => {\r\n  return (\r\n    <div className=\"loading text-primary\">\r\n      <FontAwesomeIcon icon=\"spinner\" size=\"10x\" pulse />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Loading;\r\n","import React, { useEffect, useState, Dispatch } from \"react\";\r\nimport { useParams, Redirect } from \"react-router-dom\";\r\n\r\n// API\r\nimport { get } from \"../lib/api\";\r\n\r\n// components\r\nimport ProductCard from \"./ProductCard\";\r\nimport Cart from \"./Cart\";\r\nimport NotFound from \"./NotFound\";\r\nimport Loading from \"./Loading\";\r\n\r\nconst NO_MOVIES: Product[] = [\r\n  {\r\n    id: -1,\r\n    name: \"No products\",\r\n    description: \"\",\r\n    price: 0,\r\n    imageUrl: \"\",\r\n    year: 0,\r\n    added: new Date(),\r\n    productCategory: []\r\n  }\r\n];\r\n\r\ninterface SearchHitsProps {\r\n  categories: ProductCategory[];\r\n  products: Product[];\r\n  cart: Cart;\r\n  addToCart: AddToCart;\r\n  updateCart: UpdateCart;\r\n  toggleCart: () => void;\r\n  setClearSearch: Dispatch<React.SetStateAction<boolean>>;\r\n}\r\n\r\nconst SearchHits: React.FC<SearchHitsProps> = ({\r\n  categories,\r\n  products,\r\n  cart,\r\n  addToCart,\r\n  updateCart,\r\n  toggleCart,\r\n  setClearSearch\r\n}) => {\r\n  const { slug } = useParams();\r\n  const [foundProducts, setFoundProducts] = useState<Product[]>([]);\r\n  const [loading, setLoading] = useState<boolean>(true);\r\n\r\n  useEffect(() => {\r\n    setLoading(!foundProducts.length);\r\n  }, [loading, foundProducts]);\r\n\r\n  useEffect(() => {\r\n    window.scrollTo(0, 0);\r\n    if (slug) {\r\n      const setProductsAsync = async () => {\r\n        const hits: Product[] = await get<Product>(\r\n          `search/?searchText=${slug}`\r\n        );\r\n        const result: Product[] =\r\n          hits && hits.length\r\n            ? products.filter(product =>\r\n                hits.map(hit => hit.id).includes(product.id)\r\n              )\r\n            : NO_MOVIES;\r\n        setFoundProducts(result);\r\n      };\r\n\r\n      setProductsAsync();\r\n    }\r\n  }, [slug, products]);\r\n\r\n  useEffect(() => {\r\n    return () => {\r\n      setClearSearch(true);\r\n    };\r\n  }, []);\r\n\r\n  return (\r\n    <>\r\n      {!slug && <Redirect to=\"/\" />}\r\n      {((!foundProducts || !foundProducts.length) && <Loading />) ||\r\n        (foundProducts === NO_MOVIES && (\r\n          <NotFound hasButton={false} caption=\"Nope\" />\r\n        )) || (\r\n          <>\r\n            <div className=\"row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-4 row-cols-xl-5\">\r\n              {foundProducts.map(product => (\r\n                <ProductCard\r\n                  key={product.id}\r\n                  product={product}\r\n                  categories={categories}\r\n                  addToCart={addToCart}\r\n                />\r\n              ))}\r\n            </div>\r\n          </>\r\n        )}\r\n      <div className={`${cart.open ? \"\" : \"fixed-bottom\"}`}>\r\n        <div className=\"row\">\r\n          <div className=\"col col-sm-8 col-lg-6\">\r\n            <Cart\r\n              cart={cart}\r\n              updateCart={updateCart}\r\n              toggleCart={toggleCart}\r\n              atCheckout={false}\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default SearchHits;\r\n","import React from \"react\";\r\nimport { APP_INFO } from \"./App\";\r\n\r\nconst Footer = () => {\r\n  return (\r\n    <footer className=\"text-right text-secondary px-4\">\r\n      <p>\r\n        <small>\r\n          {`${APP_INFO.name} ${APP_INFO.version} ${process.env.NODE_ENV}`}\r\n          <br />\r\n          &copy; 2020 Christofer Laurin\r\n        </small>\r\n      </p>\r\n    </footer>\r\n  );\r\n};\r\n\r\nexport default Footer;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { Route, Switch, Redirect } from \"react-router-dom\";\r\nimport slugify from \"slugify\";\r\nimport packageJSON from \"../../package.json\";\r\n\r\n// API\r\nimport * as API from \"../lib/api\";\r\n\r\n// css\r\nimport \"../scss/App.scss\";\r\n\r\n// icons\r\nimport \"../lib/FontAwesome\";\r\n\r\n// components\r\nimport Navigation from \"./Navigation\";\r\nimport ProductsPage from \"./ProductsPage\";\r\nimport NotFound from \"./NotFound\";\r\nimport Checkout from \"./Checkout\";\r\nimport Confirmation from \"./Confirmation\";\r\nimport Loading from \"./Loading\";\r\nimport SearchHits from \"./SearchHits\";\r\nimport Footer from \"./Footer\";\r\n\r\nconst emptyCart: Cart = {\r\n  items: new Map(),\r\n  articles: 0,\r\n  subTotal: 0,\r\n  blink: false,\r\n  open: false\r\n};\r\n\r\nconst emptyOrder: Order = {\r\n  companyId: 0,\r\n  created: \"\",\r\n  createdBy: \"\",\r\n  paymentMethod: \"\",\r\n  totalPrice: 0,\r\n  status: 0\r\n};\r\n\r\nexport const APP_INFO = {\r\n  name: packageJSON.name,\r\n  version: packageJSON.version\r\n};\r\n\r\nconst MIN_QTY = 1;\r\nconst MAX_QTY = 99;\r\nconst NEWS_CATEGORY: ProductCategory = { id: -1, name: \"Newly added\" };\r\nconst NUMBER_OF_ITEMS_IN_NEWS = 4;\r\n\r\nconst companies = [\"\", \"Telia\", \"Volvo\", \"Skanska\", \"ABB\"];\r\n\r\nconst App = () => {\r\n  const [loading, setLoading] = useState<boolean>(true);\r\n  const [categories, setCategories] = useState<ProductCategory[]>([]);\r\n  const [products, setProducts] = useState<Product[]>([]);\r\n\r\n  const [cart, setCart] = useState<Cart>(emptyCart);\r\n  const [order, setOrder] = useState<Order>(emptyOrder);\r\n\r\n  const [clearSearch, setClearSearch] = useState<boolean>(false);\r\n\r\n  useEffect(() => {\r\n    setLoading(!(categories.length && products.length));\r\n  }, [loading, categories, products]);\r\n\r\n  useEffect(() => {\r\n    const setCategoriesAsync = async () => {\r\n      const c: ProductCategory[] = await API.get<ProductCategory>(\r\n        \"categories\",\r\n        true\r\n      );\r\n      c.unshift(NEWS_CATEGORY);\r\n      c.map(\r\n        category => (category.slug = slugify(category.name, { lower: true }))\r\n      );\r\n      setCategories(c);\r\n    };\r\n    setCategoriesAsync();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const setProductsAsync = async () => {\r\n      const _products: Product[] = await API.get<Product>(\"products\", true);\r\n      populateNewsCategory(_products);\r\n      _products.sort((x, y) => (x.name > y.name ? 1 : -1));\r\n      setProducts(_products);\r\n    };\r\n    setProductsAsync();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (cart.blink) {\r\n      setTimeout(() => setCart({ ...cart, blink: false }), 500);\r\n    }\r\n    if (cart.items.size) {\r\n      localStorage.setItem(`${APP_INFO.name}.cart`, JSON.stringify(cart));\r\n      const items: number[][] = [];\r\n      cart.items.forEach((quantity, product) =>\r\n        items.push([product.id, quantity])\r\n      );\r\n      localStorage.setItem(`${APP_INFO.name}.items`, JSON.stringify(items));\r\n    } else {\r\n      localStorage.removeItem(`${APP_INFO.name}.cart`);\r\n      localStorage.removeItem(`${APP_INFO.name}.items`);\r\n    }\r\n  }, [cart]);\r\n\r\n  useEffect(() => {\r\n    const initialCart: () => Cart = () => {\r\n      const cartString = localStorage.getItem(`${APP_INFO.name}.cart`);\r\n      const itemsString = localStorage.getItem(`${APP_INFO.name}.items`);\r\n      if (\r\n        cartString &&\r\n        cartString.length &&\r\n        itemsString &&\r\n        itemsString.length\r\n      ) {\r\n        const _cart: Cart = JSON.parse(cartString);\r\n        const itemsArray = JSON.parse(itemsString).map((values: number[]) => {\r\n          const [productId, quantity] = values;\r\n          const product = products.find(m => m.id === productId);\r\n          return [product, quantity];\r\n        });\r\n        _cart.items = new Map<Product, number>(itemsArray);\r\n        return _cart;\r\n      }\r\n      return emptyCart;\r\n    };\r\n    if (products && products.length) setCart(initialCart());\r\n  }, [products]);\r\n\r\n  const populateNewsCategory = (_products: Product[]) => {\r\n    _products.sort((x, y) => (x.added < y.added ? 1 : -1));\r\n    _products\r\n      .slice(0, NUMBER_OF_ITEMS_IN_NEWS)\r\n      .map(product =>\r\n        product.productCategory.push({ categoryId: NEWS_CATEGORY.id })\r\n      );\r\n  };\r\n\r\n  const addToCart: AddToCart = (product, quantity) => {\r\n    const newCartItems = new Map(cart.items);\r\n    if (newCartItems.has(product)) {\r\n      const currentQty = newCartItems.get(product);\r\n      if (currentQty) newCartItems.set(product, currentQty + quantity);\r\n    } else newCartItems.set(product, quantity);\r\n    const [subTotal, articles] = getTotals(newCartItems);\r\n    setCart({\r\n      ...cart,\r\n      items: newCartItems,\r\n      subTotal,\r\n      articles,\r\n      open: false,\r\n      blink: true\r\n    });\r\n  };\r\n\r\n  const updateCart: UpdateCart = (product, quantity) => {\r\n    const newCartItems = new Map(cart.items);\r\n    if (product && quantity === 0) {\r\n      newCartItems.delete(product);\r\n    } else if (quantity >= MIN_QTY && quantity <= MAX_QTY) {\r\n      newCartItems.set(product, quantity);\r\n    }\r\n    const [subTotal, articles] = getTotals(newCartItems);\r\n    setCart({\r\n      ...cart,\r\n      items: newCartItems,\r\n      subTotal,\r\n      articles,\r\n      blink: !cart.open\r\n    });\r\n  };\r\n\r\n  const getTotals = (items: Map<Product, number>) => {\r\n    let subTotal = 0;\r\n    let articles = 0;\r\n    for (let [product, quantity] of items.entries()) {\r\n      const price = product.price * quantity;\r\n      subTotal += price;\r\n      articles += quantity;\r\n    }\r\n    return [subTotal, articles];\r\n  };\r\n\r\n  const toggleCart = () => {\r\n    if (cart.articles) setCart({ ...cart, open: !cart.open });\r\n  };\r\n\r\n  return loading ? (\r\n    <Loading />\r\n  ) : (\r\n    <div id=\"content\">\r\n      <Navigation\r\n        categories={categories}\r\n        clearSearch={clearSearch}\r\n        setClearSearch={setClearSearch}\r\n      />\r\n      <main className=\"container-fluid text-light px-3\">\r\n        <Switch>\r\n          <Route path=\"/checkout\">\r\n            <Checkout\r\n              cart={cart}\r\n              order={order}\r\n              companies={companies}\r\n              setOrder={setOrder}\r\n              updateCart={updateCart}\r\n              toggleCart={toggleCart}\r\n            />\r\n          </Route>\r\n          <Route path=\"/confirmation\">\r\n            <Confirmation\r\n              cart={cart}\r\n              order={order}\r\n              companies={companies}\r\n              products={products}\r\n            />\r\n          </Route>\r\n          <Route path=\"/not-found\">\r\n            <NotFound hasButton={true} caption=\"404\" />\r\n          </Route>\r\n          <Route path=\"/search/:slug\">\r\n            <SearchHits\r\n              categories={categories}\r\n              products={products}\r\n              cart={cart}\r\n              addToCart={addToCart}\r\n              updateCart={updateCart}\r\n              toggleCart={toggleCart}\r\n              setClearSearch={setClearSearch}\r\n            />\r\n          </Route>\r\n          <Route path=\"/:slug\">\r\n            <ProductsPage\r\n              categories={categories}\r\n              products={products}\r\n              cart={cart}\r\n              addToCart={addToCart}\r\n              updateCart={updateCart}\r\n              toggleCart={toggleCart}\r\n            />\r\n          </Route>\r\n          <Redirect from=\"/\" exact to=\"/newly-added\" />\r\n          <Route>\r\n            <Redirect to=\"/not-found\" />\r\n          </Route>\r\n        </Switch>\r\n      </main>\r\n      <Footer />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default App;\r\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { BrowserRouter as Router } from \"react-router-dom\";\n\n// components\nimport App from \"./components/App\";\n\nReactDOM.render(\n  <Router basename={process.env.PUBLIC_URL}>\n    <App />\n  </Router>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}