(this["webpackJsonpreact-webshop"]=this["webpackJsonpreact-webshop"]||[]).push([[0],{27:function(e){e.exports=JSON.parse('{"name":"react-webshop","version":"0.2.0","homepage":"https://dreadnallen.github.io/react-webshop","private":true,"dependencies":{"@fortawesome/fontawesome-svg-core":"^1.2.28","@fortawesome/free-brands-svg-icons":"^5.13.0","@fortawesome/free-regular-svg-icons":"^5.13.0","@fortawesome/free-solid-svg-icons":"^5.13.0","@fortawesome/react-fontawesome":"^0.1.9","@testing-library/jest-dom":"^4.2.4","@testing-library/react":"^9.5.0","@testing-library/user-event":"^7.2.1","@types/jest":"^24.9.1","@types/node":"^12.12.30","@types/react":"^16.9.25","@types/react-dom":"^16.9.5","@types/react-router-dom":"^5.1.3","axios":"^0.19.2","bootstrap":"^4.4.1","gh-pages":"^2.2.0","node-sass":"^4.13.1","react":"^16.13.1","react-bootstrap":"^1.0.0","react-dom":"^16.13.1","react-router-dom":"^5.1.2","react-scripts":"3.4.1","slugify":"^1.4.0","typescript":"^3.7.5"},"scripts":{"start":"react-scripts start","build":"react-scripts build","test":"react-scripts test","eject":"react-scripts eject","predeploy":"npm run build","deploy":"gh-pages -d build"},"eslintConfig":{"extends":"react-app"},"browserslist":{"production":[">0.2%","not dead","not op_mini all"],"development":["last 1 chrome version","last 1 firefox version","last 1 safari version"]}}')},61:function(e,t,a){e.exports=a(91)},66:function(e,t,a){},91:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(21),o=a.n(c),s=a(13),l=a(6),i=a(23),u=a(24),m=a.n(u),d=(a(66),a(59)),f=a(30),p=a(19),E=a(55),v=a(37);f.b.add(p.h,p.c,p.a,p.b,p.f,p.e,p.i,p.g,p.j,E.a,v.c,v.b,v.a,p.d);var b,g={id:-1,name:"Newly added"},h=Object(n.createContext)({categories:[],products:[],news:{NEWS_CATEGORY:g,NUMBER_OF_ITEMS_IN_NEWS:4}}),O=a(9),y=[{id:0,name:""},{id:9001,name:"Telia"},{id:9002,name:"Volvo"},{id:9003,name:"Skanska"},{id:9004,name:"ABB"}],j={items:new Map,articles:0,subTotal:0,blink:!1,open:!1,modal:{caption:"Delete item?",labelConfirm:"Delete",labelCancel:"Cancel",show:!1}},N={companyId:0,created:"",createdBy:"",paymentMethod:"",totalPrice:0,status:0},x="Please provide an accurate e-mail address!",w="Please select company!",C="Please select payment method!",S=Object(O.a)({},j),k=Object(n.createContext)({companies:y,cart:S,dispatch:function(){},emptyOrder:N}),I=a(7),D=a.n(I),T=a(10),F=a(40),A=a.n(F),L=a(27),M={name:L.name,version:L.version,homepage:L.homepage,root:L.homepage.slice(L.homepage.lastIndexOf("/"))},R=function(e){return new Intl.NumberFormat("se-SV",{style:"currency",currency:"SEK",minimumFractionDigits:0,maximumFractionDigits:0}).format(e)},P=function(e){return String(e).replace(/(.)(?=(\d{5})+$)/g,"$1-")},G=A.a.create({baseURL:"https://dreadnallen-react-webshop.firebaseapp.com/api/v1",responseType:"json",headers:{"Content-Type":"application/json"}}),q=function(){var e=Object(T.a)(D.a.mark((function e(t){var a,n,r,c,o=arguments;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>1&&void 0!==o[1]&&o[1],e.prev=1,e.next=4,G.get("/".concat(t));case 4:return n=e.sent,(r=n.data)&&r.length&&a&&localStorage.setItem("".concat(M.name,".").concat(t),JSON.stringify(r)),e.abrupt("return",r);case 10:if(e.prev=10,e.t0=e.catch(1),!(c=localStorage.getItem("".concat(M.name,".").concat(t)))||!c.length){e.next=15;break}return e.abrupt("return",JSON.parse(c));case 15:if(!e.t0||!e.t0.response){e.next=17;break}return e.abrupt("return",e.t0.response.data);case 17:throw e.t0;case 18:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}(),z=function(){var e=Object(T.a)(D.a.mark((function e(t,a,n){var r,c;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!n){e.next=8;break}return e.next=4,G.put("/".concat(a,"/").concat(n),t);case 4:return r=e.sent,e.abrupt("return",{status:r.status,data:r.data});case 8:return e.next=10,G.post("/".concat(a),t);case 10:return c=e.sent,e.abrupt("return",{status:c.status,data:c.data});case 12:e.next=19;break;case 14:if(e.prev=14,e.t0=e.catch(0),!e.t0||!e.t0.response){e.next=18;break}return e.abrupt("return",e.t0.response);case 18:throw e.t0;case 19:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,a,n){return e.apply(this,arguments)}}(),B=function(){var e=Object(T.a)(D.a.mark((function e(t,a){var n;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,G.delete("/".concat(t,"/").concat(a),{data:{id:a}});case 3:return n=e.sent,e.abrupt("return",n);case 7:if(e.prev=7,e.t0=e.catch(0),!e.t0||!e.t0.response){e.next=11;break}return e.abrupt("return",e.t0.response);case 11:throw e.t0;case 12:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,a){return e.apply(this,arguments)}}(),V=function(){var e=Object(T.a)(D.a.mark((function e(t){var a,n;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=A.a.create({responseType:"blob",headers:{"Content-Type":"video/x-matroska"}}),e.prev=1,e.next=4,a.get(t);case 4:return n=e.sent,e.abrupt("return",n.data);case 8:if(e.prev=8,e.t0=e.catch(1),!e.t0||!e.t0.response){e.next=12;break}return e.abrupt("return",e.t0.response.data);case 12:throw e.t0;case 13:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),U=a(60),_=a(20);!function(e){e[e.ADD=0]="ADD",e[e.UPDATE=1]="UPDATE",e[e.DELETE=2]="DELETE",e[e.RESET=3]="RESET",e[e.TOGGLE=4]="TOGGLE",e[e.HIDE_MODAL=5]="HIDE_MODAL"}(b||(b={}));var J,Y=function(e){var t=Object(n.useState)(j),a=Object(l.a)(t,2),r=a[0],c=a[1];Object(n.useEffect)((function(){if(r.blink&&setTimeout((function(){return c(Object(O.a)({},r,{blink:!1}))}),500),r.items.size){localStorage.setItem("".concat(M.name,".cart"),JSON.stringify(r));var e=[];r.items.forEach((function(t,a){return!!a&&e.push([a.id,t])})),localStorage.setItem("".concat(M.name,".items"),JSON.stringify(e))}}),[r]),Object(n.useEffect)((function(){e&&e.length&&c(function(){var t=j,a=localStorage.getItem("".concat(M.name,".cart")),n=localStorage.getItem("".concat(M.name,".items"));if(a&&a.length&&n&&n.length){var r=Object(O.a)({},t,{},JSON.parse(a)),c=JSON.parse(n).map((function(t){var a=Object(l.a)(t,2),n=a[0],r=a[1],c=e.find((function(e){return e.id===n}));return c?[c,r]:void 0}));r.items=new Map(c.filter((function(e){return!!e}))),r.items.size&&(t=r)}return t}())}),[e]);var o=function(){c(j),localStorage.removeItem("".concat(M.name,".cart")),localStorage.removeItem("".concat(M.name,".items"))};return[r,function(e,t){var a=Object(O.a)({},r),n=null===t||void 0===t?void 0:t.product,s=(null===t||void 0===t?void 0:t.quantity)?null===t||void 0===t?void 0:t.quantity:0,i=n?a.items.get(n):0;switch(e){case b.RESET:o();break;case b.TOGGLE:r.articles&&c(Object(O.a)({},r,{open:!r.open}));break;case b.HIDE_MODAL:a.modal.show=!1,c(Object(O.a)({},a));break;case b.ADD:s=i?i+s:s;default:var u=e===b.ADD?[!0,!1]:[!r.open,r.open],m=Object(l.a)(u,2);a.blink=m[0],a.open=m[1];var d,f=new Map(r.items);if(e===b.DELETE)a.modal.show=!1,(null===(d=r.modal.item)||void 0===d?void 0:d.product)&&f.delete(r.modal.item.product);else n&&(0===s?(a.modal.item={product:n,quantity:i||0},a.modal.show=!0):s>=1&&s<=99&&f.set(n,s));if(f.size){var p=[f].concat(Object(U.a)(function(e){var t,a=0,n=0,r=Object(_.a)(e.entries());try{for(r.s();!(t=r.n()).done;){var c=Object(l.a)(t.value,2),o=c[0],s=c[1];a+=o.price*s,n+=s}}catch(i){r.e(i)}finally{r.f()}return[a,n]}(f)));a.items=p[0],a.subTotal=p[1],a.articles=p[2],c(Object(O.a)({},a))}else o()}}]},H=a(8),W=function(e){var t=e.clearSearch,a=e.setClearSearch,c=Object(n.useContext)(h).categories,o=Object(i.g)(),l=Object(n.useRef)(null),u=Object(n.useRef)(null),m=Object(n.useCallback)((function(e){e?!(l&&l.current&&l.current.value)&&u&&u.current&&(u.current.checked=!1):setTimeout((function(){return m(!0)}),2e3)}),[l,u]);Object(n.useEffect)((function(){t&&l.current&&(l.current.value="",m()),a(!1)}),[t,m,a]);return r.a.createElement("div",{className:"bg-secondary sticky-top px-2 py-1"},r.a.createElement("nav",{className:"nav nav-pills nav-fill align-items-center"},c.map((function(e){return r.a.createElement(s.c,{className:"nav-item nav-link h2 pt-2 pb-1 my-1",to:"/".concat(e.slug),key:e.id},e.name)})),r.a.createElement("div",{className:"nav-item"},r.a.createElement("input",{ref:u,type:"checkbox",id:"search-toggle",onChange:function(){var e,t;(null===(e=u.current)||void 0===e?void 0:e.checked)&&(null===(t=l.current)||void 0===t||t.focus())}}),r.a.createElement("div",{className:"search mx-4 my-0 align-self-center"},r.a.createElement("div",{className:"d-flex"},r.a.createElement("input",{ref:l,className:"form-control",type:"search",placeholder:"Search","aria-label":"Search",onChange:function(e){var t=encodeURIComponent(e.target.value);t?t.length>1&&o.push("/search/".concat(t)):m()}}))),r.a.createElement("label",{className:"search-open btn btn-secondary m-0",htmlFor:"search-toggle"},r.a.createElement(H.a,{icon:"search"})))))},$=a(14),K=a(12),Q=function(e){var t=e.product,a=Object(n.useContext)(h).categories,c=[];return a.filter((function(e){var a;return e.id>0&&(null===(a=t.productCategory)||void 0===a?void 0:a.find((function(t){return t.categoryId===e.id})))})).map((function(e){return c.push(r.a.createElement(s.b,{key:e.id,className:"badge badge-pill mr-2 text-secondary product-category-".concat(e.id),to:"/".concat(e.slug)},e.name))})),r.a.createElement(r.a.Fragment,null,c)},X=function(e){var t=e.product,a=Object(n.useContext)(k).dispatch;return r.a.createElement("div",{className:"d-flex"},r.a.createElement("div",{className:"card mx-1 mx-sm-3 my-3 bg-dark shadow-sm"},r.a.createElement("div",{className:"overlay"},r.a.createElement("img",{className:"card-img-top img-fluid",alt:t.name,src:t.imageUrl}),r.a.createElement("div",{className:"card-description"},r.a.createElement("div",{className:"d-flex"},r.a.createElement("div",null,r.a.createElement("img",{className:"thumbnail d-block d-sm-none",alt:t.name,src:t.imageUrl})),r.a.createElement("div",null,r.a.createElement("h4",{className:"font-weight-bold"},t.name),r.a.createElement("p",null,t.description))))),r.a.createElement("div",{className:"card-footer px-3 px-md-2"},r.a.createElement("div",{className:"d-flex mb-3"},r.a.createElement(Q,{product:t})),r.a.createElement("div",{className:"d-flex flex-md-wrap align-items-center justify-content-between"},r.a.createElement("div",{className:"h5 font-weight-bold mb-0 mx-1"},R(t.price)),r.a.createElement("button",{className:"btn btn-primary",onClick:function(){return a(b.ADD,{product:t,quantity:1})}},"Add to cart")))))},Z=function(e){var t=e.item,a=e.editable,n=e.onChange,c=e.updateParams,o=e.openClass;return r.a.createElement(r.a.Fragment,null,r.a.createElement("li",{className:"cart-item list-group-item d-flex align-items-center px-3 ".concat(o)},r.a.createElement("div",{className:"mr-3"},r.a.createElement("img",{className:"thumbnail",src:t.product.imageUrl,alt:t.product.name})),r.a.createElement("div",{className:"flex-grow-1 d-flex flex-column h5 mb-0"},r.a.createElement("div",{className:"mb-2"},t.product.name),r.a.createElement("div",{className:"d-flex align-items-center justify-content-between"},r.a.createElement("div",{className:a?"bg-secondary text-info rounded-pill":""},r.a.createElement("div",{className:"d-flex align-items-center justify-content-start"},a&&r.a.createElement("div",{className:"update decrease p-1",onClick:function(e){return n(e,Object(O.a)({},c,{item:t,quantity:t.quantity-1}))}},r.a.createElement(H.a,{icon:"minus-circle"}))||r.a.createElement("small",{className:"text-lighter"},"qty :"),r.a.createElement("div",{className:"font-weight-bold"},r.a.createElement("input",{onChange:function(e){return e.target.value&&n(e,Object(O.a)({},c,{item:t,quantity:parseInt(e.target.value)}))},inputMode:"numeric",pattern:"[0-9]*",type:"text",name:"quantity",value:t.quantity,disabled:!a})),a&&r.a.createElement("div",{className:"update increase p-1",onClick:function(e){return n(e,Object(O.a)({},c,{item:t,quantity:t.quantity+1}))}},r.a.createElement(H.a,{icon:"plus-circle"})))),r.a.createElement("div",{className:a?"w-25 text-right":"text-right"},R(t.product.price*t.quantity)),a&&r.a.createElement("div",{className:"w-25"},r.a.createElement("div",{className:"update ml-auto p-1",onClick:function(e){return n(e,Object(O.a)({},c,{item:t,quantity:0}))}},r.a.createElement(H.a,{icon:["far","trash-alt"],size:"sm"})))))))},ee=function(e){var t,a=e.openClass,c=Object(n.useContext)(k),o=c.cart,s=c.dispatch,i=function(e,t){var a=t.item,n=t.quantity;a&&void 0!==n&&s(b.UPDATE,{product:a.product,quantity:n})},u=[],m=Object(_.a)(o.items.entries());try{for(m.s();!(t=m.n()).done;){var d=Object(l.a)(t.value,2),f=d[0],p=d[1];u.push(r.a.createElement(Z,{key:f.id,item:{product:f,quantity:p},editable:!0,onChange:i,updateParams:{},openClass:a}))}}catch(E){m.e(E)}finally{m.f()}return r.a.createElement(r.a.Fragment,null,u)},te=a(33),ae=a(32),ne=function(e){var t=e.props,a=e.onConfirm,n=e.onCancel;return r.a.createElement(te.a,{show:t.show,onHide:n,centered:!0},r.a.createElement(te.a.Header,{closeButton:!0,className:"border-0 pb-0"},r.a.createElement(te.a.Title,null,t.caption)),r.a.createElement(te.a.Body,{className:"pt-0"},r.a.createElement("div",{className:"cart my-3"},r.a.createElement("ul",{className:"list-group"},t.item&&r.a.createElement(Z,{item:t.item,editable:!1,onChange:function(){},updateParams:{},openClass:"open"}))),r.a.createElement("div",{className:"d-flex align-items-center justify-content-end"},r.a.createElement(ae.a,{variant:"outline-info",onClick:n},t.labelCancel),r.a.createElement(ae.a,{variant:"danger",onClick:a,className:"ml-3"},t.labelConfirm))))},re=function(e){var t=e.atCheckout,a=Object(n.useContext)(k),c=a.cart,o=a.dispatch,i=Object(n.useRef)(null);Object(n.useEffect)((function(){c.open&&i&&i.current&&i.current.scrollIntoView({behavior:"smooth"})}),[c.open]);var u=function(){return c.open||t?"open":""},m=function(){var e,t=[],a=Object(_.a)(c.items.entries());try{for(a.s();!(e=a.n()).done;){var n=Object(l.a)(e.value,2),o=n[0],s=n[1];t.push(r.a.createElement("div",{key:o.id,className:"py-1 py-0-sm d-flex align-items-center"},r.a.createElement("div",null,r.a.createElement("img",{className:"thumbnail",src:o.imageUrl,alt:o.name})),r.a.createElement("div",{className:"label badge badge-pill"},s)))}}catch(i){a.e(i)}finally{a.f()}return r.a.createElement("div",{className:"d-flex flex-wrap"},t)},d=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"d-flex m-3 py-1 align-items-center flex-nowrap h5"},r.a.createElement("div",null,r.a.createElement(H.a,{icon:"shopping-cart"})),r.a.createElement("div",{className:"ml-2 font-weight-bold ".concat(!c.open&&(c.items.size?" d-none d-sm-none":"")+(c.items.size>2?" d-md-none":" d-md-block")+(c.items.size>3?" d-lg-none":" d-lg-block")+(c.items.size>6?" d-xl-none":" d-xl-block"))},"Shopping cart")),r.a.createElement("div",{className:"ml-4"},r.a.createElement(m,null)),r.a.createElement("div",{className:"ml-auto mr-4"},r.a.createElement(H.a,{icon:"angle-up",size:"lg"})))},f=function(){return r.a.createElement(r.a.Fragment,null,c.articles?r.a.createElement("li",{className:"cart-item cart-footer list-group-item d-flex justify-content-between align-items-center flex-wrap\n        ".concat(u())},r.a.createElement("div",{className:"d-flex h5 ml-auto my-0 mr-3"},r.a.createElement("div",{className:"font-weight-light mr-3"},"Total:"),r.a.createElement("div",{className:"font-weight-bold"},R(c.subTotal))),r.a.createElement("div",{className:"text-right"},!t&&r.a.createElement(s.b,{to:"/checkout",className:"btn btn-primary"},"Check Out",r.a.createElement(H.a,{icon:"angle-right",size:"lg",className:"ml-2"})))):void 0)};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"cart-offset",ref:i}),r.a.createElement("div",{className:"cart",id:"cart"},r.a.createElement("ul",{className:"list-group ".concat(c.open?"":"mx-3 m-md-3")},!t&&r.a.createElement("li",{onClick:function(){return o(b.TOGGLE)},className:"cart-header toggle p-0 list-group-item d-flex align-items-center\n          ".concat(u()," ").concat(c.blink?"blink":"")},r.a.createElement(d,null)),r.a.createElement(ee,{openClass:u()}),r.a.createElement(f,null))),r.a.createElement(ne,{onConfirm:function(){return o(b.DELETE)},onCancel:function(){return o(b.HIDE_MODAL)},props:c.modal}))},ce=function(){var e=Object(n.useContext)(h),t=e.categories,a=e.products,c=Object(n.useContext)(k),o=c.cart,s=c.dispatch,l=Object(i.h)().slug,u=l?t.find((function(e){return e.slug===l})):t.find((function(e){return-1===e.id})),m=function(e){var t=Object(n.useRef)();return Object(n.useEffect)((function(){t.current=e})),t.current}(l);Object(n.useEffect)((function(){m!==l&&o.open&&s(b.TOGGLE)}),[m,l,o.open,s]),Object(n.useEffect)((function(){window.scrollTo(0,0)}),[l]);var d;return r.a.createElement(r.a.Fragment,null,!u&&r.a.createElement(i.a,{to:"/not-found"}),!l&&u&&r.a.createElement(i.a,{to:"/".concat(u.slug)}),r.a.createElement($.a,{xs:1,sm:2,md:3,lg:4,xl:5},u&&(d=u,a.filter((function(e){return e.productCategory.find((function(e){return e.categoryId===d.id}))}))).map((function(e){return r.a.createElement(X,{key:e.id,product:e})}))),r.a.createElement("div",{className:"".concat(o.open?"":"fixed-bottom")},r.a.createElement($.a,null,r.a.createElement(K.a,{sm:8,lg:6,className:"px-1 px-sm-3"},r.a.createElement(re,{atCheckout:!1})))))},oe=function(e){var t=e.video,a=e.hasButton,n=e.caption,c=Object(i.g)();return r.a.createElement("div",{className:"video"},r.a.createElement("div",{className:"overlay w-100"},r.a.createElement("video",{autoPlay:!0,loop:!0,muted:!0,playsInline:!0,poster:t.poster},r.a.createElement("source",{src:t.url,type:"video/mp4"})),r.a.createElement("div",{className:"description d-flex justify-content-around"},a&&r.a.createElement("div",{className:"align-self-center text-nowrap"},r.a.createElement("button",{className:"btn",onClick:c.goBack},r.a.createElement(H.a,{icon:"angle-left",size:"sm",className:"mr-2"}),"back")),r.a.createElement("div",null,r.a.createElement("h1",null,n)))))},se=a(31),le=a(15),ie=function(e){var t=e.selected,a=void 0===t?0:t,c=e.onChange,o=e.errors,s=Object(n.useContext)(k).companies;return r.a.createElement(le.a.Group,{controlId:"formGroupCompany"},r.a.createElement(le.a.Label,null,"company"),r.a.createElement(le.a.Control,{as:"select",custom:!0,size:"lg",name:"companyId",defaultValue:a,onChange:c,isInvalid:!!(null===o||void 0===o?void 0:o.companyId)},s.map((function(e){return r.a.createElement("option",{value:e.id?e.id:"",key:e.id},e.name)}))),r.a.createElement(le.a.Control.Feedback,{type:"invalid"},null===o||void 0===o?void 0:o.companyId))},ue=a(36),me=a(25),de=[{icon:"cc-visa",name:"Visa"},{icon:"cc-mastercard",name:"MasterCard"},{icon:"cc-amex",name:"Amex"}],fe=function(e){var t=e.order,a=e.setOrder,n=e.errors,c=e.setErrors;return r.a.createElement("div",{className:"form-group"},r.a.createElement(le.a.Label,null,"payment method"),r.a.createElement(ue.a,{className:"d-flex flex-wrap rounded ".concat(n.paymentMethod?"border border-danger is-invalid":"border border-dark"),type:"radio",name:"options",value:t.paymentMethod,onChange:function(e){c(Object(O.a)({},n,{paymentMethod:""})),a(Object(O.a)({},t,{paymentMethod:e}))}},de.map((function(e){return r.a.createElement(me.a,{key:e.icon,value:e.name,variant:t.paymentMethod===e.name?"secondary":"info"},r.a.createElement("div",{className:"d-flex align-items-center justify-content-center"},r.a.createElement(H.a,{icon:["fab",e.icon],size:"2x",key:e.icon,className:"mr-2"}),r.a.createElement("span",{className:"d-none d-sm-inline font-weight-lighter"},e.name)))}))),r.a.createElement(le.a.Control.Feedback,{type:"invalid"},n.paymentMethod))},pe=function(e){var t=e.order,a=e.setOrder,n=e.errors,c=e.setErrors,o=e.isValidEmail,s=e.isSaving,l=e.onSubmit,i=function(e){if(e.target.name){c(Object(O.a)({},n,Object(se.a)({},e.target.name,"")));var r=Object(se.a)({},e.target.name,e.target.value);a(Object(O.a)({},t,{},r))}};return r.a.createElement(le.a,{onSubmit:l,noValidate:!0,className:"mt-4"},r.a.createElement(ie,{selected:t.companyId,onChange:i,errors:n}),r.a.createElement(le.a.Group,{controlId:"formGroupEmail"},r.a.createElement(le.a.Label,null,"e-mail address"),r.a.createElement(le.a.Control,{type:"email",name:"createdBy",placeholder:"e-mail",size:"lg",value:t.createdBy,onChange:i,isValid:o(),isInvalid:!!n.createdBy}),r.a.createElement(le.a.Control.Feedback,{type:"invalid"},n.createdBy)),r.a.createElement(fe,{order:t,setOrder:a,errors:n,setErrors:c}),r.a.createElement("div",{className:"text-right mt-4"},r.a.createElement("button",{type:"submit",className:"w-40 btn btn-primary mt-4 mt-md-0"},s?r.a.createElement(H.a,{icon:"spinner",pulse:!0}):r.a.createElement(r.a.Fragment,null,"Place order",r.a.createElement(H.a,{icon:"angle-right",size:"lg",className:"ml-2"})))))},Ee=function(e){var t=e.order,a=e.setOrder,c=Object(n.useContext)(k),o=c.cart,s=c.dispatch,u=Object(n.useState)(!1),m=Object(l.a)(u,2),d=m[0],f=m[1],p=Object(n.useState)({companyId:"",createdBy:"",paymentMethod:""}),E=Object(l.a)(p,2),v=E[0],g=E[1];Object(n.useEffect)((function(){window.scrollTo(0,0)}),[]),Object(n.useEffect)((function(){o.open&&s(b.TOGGLE)}),[o.open,s]);var h=Object(i.g)();Object(n.useEffect)((function(){o.subTotal||h.push("/")}),[h,o]);var y=function(){var e={};return j()||(e.createdBy=x),t.companyId||(e.companyId=w),t.paymentMethod||(e.paymentMethod=C),g(e),0===Object.keys(e).length},j=function(){return!!t.createdBy.match(/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,3})+$/)},N=function(){var e=Object(T.a)(D.a.mark((function e(t){var n,r,c,o;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f(!0),console.log("createdOrder:",JSON.stringify(t)),e.next=4,z(t,"orders");case 4:n=e.sent,console.log("response:",n),201!==n.status?(f(!1),n.data&&n.data.errors?(r=n.data.errors.map((function(e){return e.msg})),console.error("ERROR!",r.join("\n")),g(Object(O.a)({},v,{response:r.join("\n")}))):(c="".concat(n.status," : ").concat(n.statusText),g(Object(O.a)({},v,{response:c})))):(o=n.data,console.log("savedOrder:",JSON.stringify(o)),a(Object(O.a)({},o)),h.push("/confirmation"));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=function(e){var t,a=[],n=Object(_.a)(o.items.entries());try{for(n.s();!(t=n.n()).done;){var r=Object(l.a)(t.value,2),c=r[0],s=r[1],i={productId:c.id,orderId:null===e||void 0===e?void 0:e.id,amount:s};a.push(i)}}catch(u){n.e(u)}finally{n.f()}return a};return r.a.createElement(r.a.Fragment,null,r.a.createElement($.a,{xs:1,md:2},r.a.createElement(K.a,{className:"mt-2 p-0"},r.a.createElement(re,{atCheckout:!0})),r.a.createElement(K.a,null,r.a.createElement(pe,{order:t,setOrder:a,errors:v,setErrors:g,isValidEmail:j,isSaving:d,onSubmit:function(e){if(e.preventDefault(),y()){delete t.id;var a=Object(O.a)({},t,{created:(new Date).toISOString(),totalPrice:o.subTotal,orderRows:S(t)});N(a)}}}),!!v&&!!v.response&&r.a.createElement("div",{className:"alert alert-danger mt-4 mb-0"},v.response))))},ve=function(e){var t,a,c,o=e.items,s=e.editable,l=e.onChange,i=e.updateParams,u=e.openClass,m=Object(n.useContext)(h).products;return!o&&(null===i||void 0===i?void 0:i.order)&&(c=null===(t=i.order)||void 0===t?void 0:t.orderRows,o=c?c.map((function(e){return{product:m.find((function(t){return t.id===e.productId})),quantity:e.amount}})):[]),r.a.createElement(r.a.Fragment,null,null===(a=o)||void 0===a?void 0:a.map((function(e){return!!e.product&&r.a.createElement(Z,{key:e.product.id,item:e,editable:s,onChange:l,updateParams:Object(O.a)({},i,{items:o}),openClass:u})})))},be=function(e){var t=e.order,a=Object(n.useContext)(k),c=a.companies,o=a.cart,s=a.dispatch,i=Object(n.useState)(""),u=Object(l.a)(i,2),m=u[0],d=u[1];return Object(n.useEffect)((function(){window.scrollTo(0,0)}),[]),Object(n.useEffect)((function(){o.items.size&&function(){var e="";if(t.orderRows){var a;(null===(a=t.orderRows)||void 0===a?void 0:a.length)!==o.items.size&&(e="Order contains wrong number of items.");var n,r=0,c=Object(_.a)(o.items.entries());try{for(c.s();!(n=c.n()).done;){var i=Object(l.a)(n.value,2),u=i[0],m=i[1],f=t.orderRows[r];u.id===f.productId&&m===f.amount||(e='Order contains wrong quantity of "'.concat(u.name,'": ').concat(f.amount," should be ").concat(m,"!")),r++}}catch(p){c.e(p)}finally{c.f()}}else e="Order is empty!";if(!e)return s(b.RESET),"";d(e)}()}),[o.items,s,t.orderRows]),r.a.createElement(r.a.Fragment,null,r.a.createElement($.a,null,r.a.createElement("h1",{className:"m-4 text-secondary"},"Order confirmation")),r.a.createElement($.a,null,r.a.createElement(K.a,{xs:12,lg:6,className:"mb-4"},r.a.createElement("div",{className:"cart open"},r.a.createElement("ul",{className:"list-group open"},r.a.createElement(ve,{editable:!1,onChange:function(){},updateParams:{order:t},openClass:"open"}),r.a.createElement("li",{className:"cart-item cart-footer h5 list-group-item d-flex justify-content-end open"},r.a.createElement("div",{className:"font-weight-bold d-flex m-0"},r.a.createElement("div",{className:"font-weight-light mr-3"},"Total:"),r.a.createElement("div",null,R(t.totalPrice)))))),!!m&&r.a.createElement("div",{className:"alert alert-danger mt-4 mb-0"},m)),r.a.createElement(K.a,null,r.a.createElement("div",{className:"cart open"},r.a.createElement("ul",{className:"list-group open m-0"},r.a.createElement("li",{className:"cart-item list-group-item d-flex align-items-center justify-content-between open"},r.a.createElement("div",{className:"font-weight-light"},"order #"),r.a.createElement("div",null,P(t.id))),r.a.createElement("li",{className:"cart-item list-group-item d-flex align-items-center justify-content-between open"},r.a.createElement("div",{className:"font-weight-light"},"customer"),r.a.createElement("div",null,c.map((function(e){return e.id===t.companyId?e.name:void 0})))),r.a.createElement("li",{className:"cart-item list-group-item d-flex align-items-center justify-content-between open"},r.a.createElement("div",{className:"font-weight-light"},"order created"),r.a.createElement("div",{className:"text-nowrap"},new Date(t.created).toLocaleString("en-gb"))),r.a.createElement("li",{className:"cart-item list-group-item d-flex align-items-center justify-content-between open"},r.a.createElement("div",{className:"font-weight-light"},"e-mail"),r.a.createElement("div",null,t.createdBy)),r.a.createElement("li",{className:"cart-item list-group-item d-flex align-items-center justify-content-between open"},r.a.createElement("div",{className:"font-weight-light"},"payment method"),r.a.createElement("div",null,t.paymentMethod)))))))},ge=function(){return r.a.createElement("div",{className:"d-flex align-items-center vh-100"},r.a.createElement("div",{className:"container text-center text-primary"},r.a.createElement(H.a,{icon:"spinner",size:"10x",pulse:!0})))},he=[{id:-1,name:"No products",description:"",price:0,imageUrl:"",year:0,added:new Date,productCategory:[]}],Oe=function(e){var t=e.setClearSearch,a=e.video,c=Object(n.useContext)(h).products,o=Object(n.useContext)(k).cart,s=Object(i.h)().slug,u=Object(n.useState)([]),d=Object(l.a)(u,2),f=d[0],p=d[1],E=Object(n.useState)(!0),v=Object(l.a)(E,2),b=v[0],g=v[1];return Object(n.useEffect)((function(){g(!f.length)}),[b,f]),Object(n.useEffect)((function(){if(window.scrollTo(0,0),s){!function(){console.time("hits");var e=m()(s,{lower:!0}),t=Array.from(new Set(c.filter((function(t){return m()(t.name,{lower:!0}).indexOf(e)>=0}))));console.timeEnd("hits"),p((null===t||void 0===t?void 0:t.length)?t:he)}()}}),[s,c]),Object(n.useEffect)((function(){return function(){t(!0)}}),[t]),r.a.createElement(r.a.Fragment,null,!s&&r.a.createElement(i.a,{to:"/"}),(!f||!f.length)&&r.a.createElement(ge,null)||f===he&&r.a.createElement(oe,{video:a,hasButton:!1,caption:"Nope"})||r.a.createElement($.a,{xs:1,sm:2,md:3,lg:4,xl:5},f.map((function(e){return r.a.createElement(X,{key:e.id,product:e})}))),r.a.createElement("div",{className:"".concat(o.open?"":"fixed-bottom")},r.a.createElement($.a,null,r.a.createElement(K.a,{sm:8,lg:6,className:"px-1 px-sm-3"},r.a.createElement(re,{atCheckout:!1})))))},ye=function(){return r.a.createElement("footer",null,r.a.createElement("div",null,r.a.createElement("div",null,"\xa9 2020 Christofer Laurin"),r.a.createElement("div",null,"".concat(M.name," ").concat(M.version," ").concat("production"))))},je=["Confirmed","Completed","Pending","Shipped","Received","Denied","Cancelled","Refunded"],Ne=["#2f4858","#19629e","#dc8346","#4a9147","#006f60","#d9534f","#954f87","#665074"],xe=function(){var e=Object(T.a)(D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(){})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),we=function(){var e=Object(T.a)(D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(){})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ce=Object(n.createContext)({orderStatusArray:je,orderStatusColors:Ne,statusFilter:0,setStatusFilter:function(){},statusMatches:[],setStatusMatches:function(){},changeOrderStatus:function(){},updateItem:function(){},saveOrder:xe,deleteOrder:we});!function(e){e[e.DEFAULT=0]="DEFAULT",e[e.DIRTY=1]="DIRTY",e[e.SAVING=2]="SAVING",e[e.SAVED=3]="SAVED",e[e.DELETING=4]="DELETING",e[e.DELETED=5]="DELETED"}(J||(J={}));var Se=function(e){var t=e.order,a=e.selected,c=void 0===a?0:a,o=e.onChange,s=Object(n.useContext)(Ce),l=s.orderStatusArray,i=s.orderStatusColors,u=void 0!==c?i[c]:void 0!==(null===t||void 0===t?void 0:t.status)?i[t.status]:"inherit";return r.a.createElement("select",{name:"orderStatus",className:"w-100 badge-select text-white",style:{color:u,backgroundColor:"transparent"},defaultValue:c,onChange:function(e){return o(e,t)}},l.map((function(e,t){return r.a.createElement("option",{value:t,key:e,style:{color:i[t]}},e)})))},ke=[{icon:"cc-visa",name:"Visa"},{icon:"cc-mastercard",name:"MasterCard"},{icon:"cc-amex",name:"Amex"}],Ie=function(e){var t=e.name,a=e.size,n=ke.find((function(e){return e.name.toLowerCase()===t.toLowerCase()}));return n?r.a.createElement(H.a,{icon:["fab",n.icon],size:a}):r.a.createElement(r.a.Fragment,null)},De=function(e){var t=e.order,a=Object(n.useContext)(Ce),c=a.orderStatusColors,o=a.statusFilter,s=a.changeOrderStatus,i=a.updateItem,u=a.saveOrder,m=a.deleteOrder,d=Object(n.useState)(""),f=Object(l.a)(d,2),p=f[0],E=f[1],v=Object(n.useState)(t.status),b=Object(l.a)(v,2),g=b[0],h=b[1],O=function(){var e=Object(n.useState)(!1),t=Object(l.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(!1),o=Object(l.a)(c,2),s=o[0],i=o[1],u=Object(n.useState)(!1),m=Object(l.a)(u,2),d=m[0],f=m[1],p=Object(n.useState)(!1),E=Object(l.a)(p,2),v=E[0],b=E[1],g=Object(n.useState)(!1),h=Object(l.a)(g,2),O=h[0],y=h[1];Object(n.useEffect)((function(){d&&setTimeout((function(){return f(!1)}),1e3)}),[d]),Object(n.useEffect)((function(){s&&d&&i(!1)}),[s,d]),Object(n.useEffect)((function(){O&&setTimeout((function(){return y(!1)}),1e3)}),[O]),Object(n.useEffect)((function(){v&&O&&b(!1)}),[v,O]);return[{isDirty:a,isSaving:s,isSaved:d,isDeleting:v,isDeleted:O},function(e){switch(e){case J.DIRTY:f(!1),r(!0);break;case J.SAVING:i(!0);break;case J.SAVED:r(!1),f(!0);break;case J.DELETING:b(!0)}}]}(),y=Object(l.a)(O,2),j=y[0],N=j.isDirty,x=j.isSaving,w=j.isSaved,C=j.isDeleting,S=j.isDeleted,k=y[1],I=function(e){k(J.DIRTY),h(parseInt(e.target.value)),p||L()},F=function(){var e=Object(T.a)(D.a.mark((function e(t){var a;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return k(J.SAVING),g&&g!==t.status&&(s(g,t),L()),e.next=4,u(t);case 4:(a=e.sent)&&a.status&&[200,204].includes(a.status)&&k(J.SAVED);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),A=function(){var e=Object(T.a)(D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:k(J.DELETING),m(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),L=function(){E(""===p?"open":"")},M=void 0!==g?c[g]:void 0!==(null===t||void 0===t?void 0:t.status)?c[t.status]:"inherit",G=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"w-20"},P(t.id)),r.a.createElement("div",{className:"w-30 badge badge-pill",style:{backgroundColor:M}},r.a.createElement(Se,{order:t,onChange:I,selected:g})),r.a.createElement("div",{className:"w-40 d-flex flex-wrap align-items-center"},r.a.createElement("div",{className:"ml-4"},new Date(t.created).toLocaleDateString("en-gb")),r.a.createElement("div",{className:"ml-auto"},R(t.totalPrice))),r.a.createElement("div",{className:"ml-auto"},r.a.createElement(H.a,{icon:"angle-up"})))},q=function(){return r.a.createElement("li",{className:"cart-item cart-footer list-group-item d-flex justify-content-between align-items-center flex-wrap p-2 pl-3 m-0 ".concat(p)},r.a.createElement("div",null,r.a.createElement(Ie,{name:t.paymentMethod,size:"sm"})),r.a.createElement("div",{className:"flex-grow-1 overflow-hidden mx-2"},r.a.createElement("small",null,t.createdBy)),r.a.createElement("div",{className:"w-25"},r.a.createElement("button",{type:"button",className:"w-100 btn btn-danger",onClick:function(){return A(t)}},C&&r.a.createElement(H.a,{icon:"spinner",pulse:!0})||S&&r.a.createElement(H.a,{icon:"check"})||"Delete")),t.totalPrice?r.a.createElement("div",{className:"w-25 ml-2"},r.a.createElement("button",{type:"button",className:"w-100 btn ".concat(w?"btn-success":N?"btn-primary":"btn-outline-secondary"),disabled:!N,onClick:function(){return F(t)}},x&&r.a.createElement(H.a,{icon:"spinner",pulse:!0})||w&&r.a.createElement(H.a,{icon:"check"})||"Save")):void 0)};return r.a.createElement(r.a.Fragment,null,(-1===o||t.status===o)&&r.a.createElement("li",{className:"list-group-item p-0 mb-3"},r.a.createElement("ul",{className:"list-group"},r.a.createElement("li",{className:"toggle list-group-item d-flex align-items-center justify-content-between py-2 ".concat(p),onClick:function(e){e.target.className.includes("badge-select")||L()}},r.a.createElement(G,null)),r.a.createElement(ve,{editable:!0,onChange:function(e,t){k(J.DIRTY),i(t)},updateParams:{order:t},openClass:p}),r.a.createElement(q,null))))},Te=function(e){var t=e.statusFilter,a=e.statusMatches,c=e.changeStatusFilter,o=Object(n.useContext)(Ce),s=o.orderStatusArray,l=o.orderStatusColors;return r.a.createElement("div",{className:"my-3 w-100"},r.a.createElement(ue.a,{className:"d-flex flex-wrap w-100",type:"radio",name:"options",value:t,onChange:function(e){c(e)}},r.a.createElement(me.a,{value:-1,variant:-1===t?"secondary":"info",size:"sm"},"All",r.a.createElement("span",{className:"badge badge-pill bg-dark text-light ml-2"},a.reduce((function(e,t){return e+t}),0))),s.map((function(e,n){return a[n]?r.a.createElement(me.a,{key:e,value:n,variant:t===n?"secondary":"info",size:"sm"},e,r.a.createElement("span",{className:"badge badge-pill text-light ml-2",style:{backgroundColor:l[n]}},a[n])):void 0}))))},Fe=function(e){var t=e.orders,a=Object(n.useContext)(Ce).orderStatusArray,c=Object(n.useContext)(Ce),o=c.statusFilter,s=c.setStatusFilter,l=c.statusMatches,i=c.setStatusMatches;return Object(n.useEffect)((function(){for(var e=[],n=function(a){var n=0;t.forEach((function(e){e.status===a&&n++})),e.push(n)},r=0;r<a.length;r++)n(r);i(e)}),[t,a,i]),r.a.createElement("div",{className:"cart open"},t.length?r.a.createElement(Te,{statusFilter:o,statusMatches:l,changeStatusFilter:function(e){e<a.length&&s(e)}}):void 0,r.a.createElement("ul",{className:"list-group m-0 open"},t.map((function(e){return r.a.createElement(De,{key:e.id,order:e})}))))},Ae=function(){var e=Object(n.useContext)(k).companies,t=Object(n.useState)([]),a=Object(l.a)(t,2),c=a[0],o=a[1],s=Object(n.useState)(!0),u=Object(l.a)(s,2),m=u[0],d=u[1],f=Object(n.useState)(-1),p=Object(l.a)(f,2),E=p[0],v=p[1],b=Object(n.useState)([]),g=Object(l.a)(b,2),h=g[0],O=g[1],y=Object(i.h)().slug,j=Object(i.g)(),N=e.find((function(e){return e.slug===(null===y||void 0===y?void 0:y.toLowerCase())})),x=N?N.id:0;Object(n.useEffect)((function(){h[E]||v(-1)}),[E,h]),Object(n.useEffect)((function(){x?function(){var e=Object(T.a)(D.a.mark((function e(){var t;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q("orders?companyId=".concat(x));case 2:(t=e.sent).sort((function(e,t){return e.created<t.created?1:-1})),o(t),d(!1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()():d(!1)}),[x]);var w=function(){var e=Object(T.a)(D.a.mark((function e(t){var a;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z(t,"orders",t.id);case 2:return a=e.sent,console.log("save order:",JSON.stringify(t)),console.log("response:",a),e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=function(e){var t=c.filter((function(t){return t!==e})).concat([e]).sort((function(e,t){return e.created<t.created?1:-1}));o(t)},S=function(){var e=Object(T.a)(D.a.mark((function e(t){var a,n;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.id){e.next=8;break}return e.next=3,B("orders",t.id);case 3:return a=e.sent,console.log("delete order:",JSON.stringify(t)),console.log("response:",a),a&&a.status&&200===a.status&&(n=c.filter((function(e){return e!==t})).sort((function(e,t){return e.created<t.created?1:-1})),o(n)),e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I=function(e){var t=0;return e.map((function(e){return t+=e.product.price*e.quantity})),t},F=function(e,t){return e.map((function(e){return{productId:e.product.id,orderId:t,amount:e.quantity}}))};return r.a.createElement(Ce.Provider,{value:{orderStatusArray:je,orderStatusColors:Ne,statusFilter:E,setStatusFilter:v,statusMatches:h,setStatusMatches:O,changeOrderStatus:function(e,t){t.status=e;var a=c.filter((function(e){return e!==t})).concat([t]).sort((function(e,t){return e.created<t.created?1:-1}));o(a)},updateItem:function(e){var t=e.items,a=e.item,n=e.order,r=e.quantity;t&&a&&n&&(r?a.quantity=r:t=t.filter((function(e){return e!==a})),n.totalPrice=I(t),n.orderRows=F(t,n.id),C(n))},saveOrder:w,deleteOrder:S}},r.a.createElement($.a,null,r.a.createElement(K.a,null,r.a.createElement("h1",{className:"pt-4 text-secondary"},"Order admin")),r.a.createElement(K.a,{xs:12,sm:6,className:"my-2"},r.a.createElement(ie,{selected:x,onChange:function(t){var a=parseInt(t.target.value),n=e.find((function(e){return e.id===a})),r=n?n.slug:"";j.push("/admin/".concat(r))}}))),r.a.createElement($.a,null,r.a.createElement(K.a,null,m?r.a.createElement(ge,null):r.a.createElement(Fe,{orders:c}))))},Le=function(){var e=function(){var e=Object(n.useState)(!0),t=Object(l.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)([]),o=Object(l.a)(c,2),s=o[0],i=o[1],u=Object(n.useState)([]),d=Object(l.a)(u,2),f=d[0],p=d[1];Object(n.useEffect)((function(){r(!(s.length&&f.length))}),[a,s,f]),Object(n.useEffect)((function(){(function(){var e=Object(T.a)(D.a.mark((function e(){var t;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q("categories",!0);case 2:(t=e.sent).unshift(g),t.map((function(e){return e.slug=m()(e.name,{lower:!0})})),i(t);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(n.useEffect)((function(){(function(){var e=Object(T.a)(D.a.mark((function e(){var t;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q("products",!0);case 2:t=e.sent,E(t),t.sort((function(e,t){return e.name>t.name?1:-1})),p(t);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var E=function(e){e.sort((function(e,t){return e.added<t.added?1:-1})),e.slice(0,4).map((function(e){return e.productCategory.push({categoryId:g.id})}))};return{categories:s,products:f,loading:a}}(),t=e.categories,a=e.products,c=e.loading,o=Y(a),s=Object(l.a)(o,2),u=s[0],f=s[1],p=Object(n.useState)(N),E=Object(l.a)(p,2),v=E[0],b=E[1],O=Object(n.useState)(!1),j=Object(l.a)(O,2),x=j[0],w=j[1],C=function(){var e=Object(n.useState)({url:"",poster:""}),t=Object(l.a)(e,2),a=t[0],r=t[1];return Object(n.useEffect)((function(){(function(){var e=Object(T.a)(D.a.mark((function e(){var t,a,n;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V("".concat(M.root,"/media/404.mkv"));case 2:t=e.sent,a=window.URL.createObjectURL(t),n="".concat(M.root,"/media/404.jpg"),r({url:a,poster:n});case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),a}();return Object(n.useEffect)((function(){y.map((function(e){return e.slug=m()(e.name,{lower:!0})}))}),[]),c?r.a.createElement(ge,null):r.a.createElement("div",{id:"content"},r.a.createElement(h.Provider,{value:{categories:t,products:a,news:{NEWS_CATEGORY:g,NUMBER_OF_ITEMS_IN_NEWS:4}}},r.a.createElement(k.Provider,{value:{companies:y,cart:u,dispatch:f,emptyOrder:N}},r.a.createElement(W,{clearSearch:x,setClearSearch:w}),r.a.createElement(d.a,{fluid:!0,as:"main"},r.a.createElement(i.d,null,r.a.createElement(i.b,{path:"/checkout"},r.a.createElement(Ee,{order:v,setOrder:b})),r.a.createElement(i.b,{path:"/confirmation"},r.a.createElement(be,{order:v})),r.a.createElement(i.b,{path:"/not-found"},r.a.createElement(oe,{video:C,hasButton:!0,caption:"404"})),r.a.createElement(i.b,{path:"/admin",exact:!0},r.a.createElement(Ae,null)),r.a.createElement(i.b,{path:"/admin/:slug"},r.a.createElement(Ae,null)),r.a.createElement(i.b,{path:"/search/:slug"},r.a.createElement(Oe,{setClearSearch:w,video:C})),r.a.createElement(i.b,{path:"/:slug"},r.a.createElement(ce,null)),r.a.createElement(i.a,{from:"/",exact:!0,to:"/newly-added"}),r.a.createElement(i.b,null,r.a.createElement(i.a,{to:"/not-found"})))),r.a.createElement(ye,null))))};o.a.render(r.a.createElement(s.a,{basename:"/react-webshop"},r.a.createElement(Le,null)),document.getElementById("root"))}},[[61,1,2]]]);
//# sourceMappingURL=main.f0d5178e.chunk.js.map